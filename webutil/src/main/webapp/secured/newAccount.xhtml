<ui:composition template="/template/template.xhtml"
   xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html"
  	xmlns:f="http://java.sun.com/jsf/core" 
  	xmlns:a4j="http://richfaces.org/a4j" 
  	xmlns:rich="http://richfaces.org/rich">


<ui:param name="panelTitle" value="New Account"/>
<ui:param name="groupSelected" value="MAIN"/>
<ui:define name="util_content">

<div>
    <rich:panel id="newAccount-panel">
      <f:facet name="header">
        <h:outputText value="New Account" />
      </f:facet>
	<h:form>
	<h:outputText id="inst" value="This page should only be used by inthinc to create test tiwipro accounts.  The account, top level group, and superuser will be created.  The email and username must be unique." />
	<h:panelGrid columns="3">
    
        <h:outputText value="Account Name:" />
        <h:inputText id="accountName" value="#{newAccountBean.accountName}" required="true" requiredMessage="Account Name is required"/>
        <rich:message for="accountName"/>
	
		<h:outputText value="Username:" />
		<h:inputText  id="userName" value="#{newAccountBean.username}" required="true" requiredMessage="Username is required."/>
        <rich:message for="userName"/>
		
		<h:outputText value="Email:" />
		<h:inputText  id="email" value="#{newAccountBean.email}" required="true" requiredMessage="Email is required."/>
        <rich:message for="email"/>
		
	</h:panelGrid>        
	<h:commandButton value="Create Account" action="#{newAccountBean.createAction}"/>
	
	</h:form>
	</rich:panel>

	<h:panelGroup id="statusPanel">
		<rich:modalPanel id="errorPanel" styleClass="errorPopup" showWhenRendered="#{not empty newAccountBean.errorMsg}" width="300" height="200" zindex="2000">
		    <f:facet name="header">
		      <h:outputText value="Creat Account Error" />
		    </f:facet>
		    <p>
		      <h:outputText value="#{newAccountBean.errorMsg}" escape="false"/>
		    </p>
		    <h:form>
		    	<h:commandButton onclick="Richfaces.hideModalPanel('errorPanel')" value="OK" action="#{newAccountBean.clearErrorAction}" style="float:right"/>
			</h:form>
		</rich:modalPanel>    
	
		<rich:modalPanel id="successPanel" styleClass="successPopup" showWhenRendered="#{not empty newAccountBean.successMsg}" width="300" height="200" zindex="2000">
		    <f:facet name="header">
		      <h:outputText value="Create Account Success" />
		    </f:facet>
		    <p>
		      <h:outputText value="#{newAccountBean.successMsg}" escape="false"/>
		    </p>
		    <h:form>
		    	<h:commandButton onclick="Richfaces.hideModalPanel('successPanel')" value="OK" action="#{newAccountBean.reInitAction}" style="float:right"/>
			</h:form>
		</rich:modalPanel>    
	</h:panelGroup>

</div><!-- end page -->
<div> </div> 
</ui:define>
</ui:composition>

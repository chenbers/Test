<ui:composition template="/template/template.xhtml"
   xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html"
  	xmlns:f="http://java.sun.com/jsf/core" 
  	xmlns:a4j="http://richfaces.org/a4j" 
  	xmlns:rich="http://richfaces.org/rich">


<ui:param name="panelTitle" value="Forward Command"/>
<ui:param name="groupSelected" value="MAIN"/>
<ui:define name="content">
    <div id="middle">
    <div id="content">
    
    <a4j:form>
      <rich:panel>
         <f:facet name="header">
           Select Devices
         </f:facet>
         
         <table>
            <tr>
               <td>
                  <span>
                     <h:outputText value="Account: " />
                     <h:selectOneMenu value="#{fwdcmdBean.acctID}">
                         <f:selectItems value="#{fwdcmdBean.accountList}"/>
                     </h:selectOneMenu>
                  </span>
               </td>
              </tr>
              <tr>
               <td>
                  <rich:dataTable value="#{fwtcmdBean.devices}" var="device">
                     <rich:column>
                        <f:facet name="header">
                           <h:outputText value="Device ID"/>
                        </f:facet>
                     </rich:column>
                     <rich:column>
                        <f:facet name="header">
                           <h:outputText value="Device ID"/>
                        </f:facet>
                     </rich:column>
                  </rich:dataTable>
               </td>
            </tr>
         </table>
         
      </rich:panel>
      
      <br/>
      
      <rich:panel>
        <f:facet name="header">
         Send Foward Commands
      </f:facet>
        
        <h:panelGrid columns="3">

          <h:outputText value="IMEI: " />
          <h:inputText id="imei" label="IMEI" value="#{fwdcmdBean.imei}" binding="#{fwdcmdBean.imeiInput}"
            validator="#{fwdcmdBean.validateIMEI}" required="true" />
          <rich:message for="imei">
            <f:facet name="errorMarker">
              <h:graphicImage value="/images/error.gif" />
            </f:facet>
          </rich:message>

          <h:outputText value="Forward Command ID: " />
          <h:inputText id="fwdcmd" label="FwdCmd" value="#{fwdcmdBean.fwdcmd}" required="true" />
          <rich:message for="fwdcmd">
            <f:facet name="errorMarker">
              <h:graphicImage value="/images/error.gif" />
            </f:facet>
          </rich:message>

          <h:outputText value="Integer Data: " />
          <h:inputText id="intdata" label="Integer Data" value="#{fwdcmdBean.intData}" />
          <rich:message for="intdata">
            <f:facet name="errorMarker">
              <h:graphicImage value="/images/error.gif" />
            </f:facet>
          </rich:message>

          <h:outputText value="String Data: " />
          <h:inputText id="stringdata" label="String Data" value="#{fwdcmdBean.stringData}" />
          <rich:message for="stringdata">
            <f:facet name="errorMarker">
              <h:graphicImage value="/images/error.gif" />
            </f:facet>
          </rich:message>

        </h:panelGrid>
      </rich:panel>
      <a4j:commandButton value="Send Command" action="#{fwdcmdBean.sendFwdCmdAction}" oncomplete="javascript:if(#{empty facesContext.maximumSeverity}){Richfaces.showModalPanel('successPanel')}" />
      <a4j:commandButton value="Done" action="go_home" immediate="true" />
    </a4j:form>
    
    </div>
    </div>

    <rich:modalPanel id="successPanel" width="200" height="120" zindex="2000">
      <f:facet name="header">
        <h:outputText value="Send Foward Command" />
      </f:facet>
      <p><h:outputText value="Forward command sent successfully" /></p>
      <a4j:form>
        <a4j:commandButton onclick="Richfaces.hideModalPanel('successPanel')" value="ok"></a4j:commandButton>
      </a4j:form>
    </rich:modalPanel>
</ui:define>
</ui:composition>
    
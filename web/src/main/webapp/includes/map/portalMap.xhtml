<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

<!--
    To use:
  ==============
  include a <div> on the page with the id='map_canvas' where the map should be placed
  <ui:include src="/includes/map/portalMap.xhtml" >
  </ui:include>
  
-->

<ui:composition>
	<a4j:loadScript src="#{googleMapURLBean.mapUrl}&amp;hl=#{localeBean.locale.language}" />
    <a4j:loadStyle src="/css/jsDropdown/dropdownchecklist.css"/>
    <a4j:loadScript src="/js/jsDropdown/jquery-ui-1.8.4.custom.min.js"/>
    <a4j:loadScript src="/js/jsDropdown/ui.dropdownchecklist-1.3-min.js"/>
	<a4j:loadScript src="/js/map/maps.js" />


	<script type="text/javascript">
		function initLayers() {
			overlaysState = portalmap.getLayersState();
			portalmap.reinit();	
			i = 0;
			<ui:repeat value="#{customMapsBean.customMaps}" var="customMap">
				selected = overlaysState ? (overlaysState[i] ? overlaysState[i] : false) : false;
				portalmap.addWMSLayer("#{customMap.url}", "#{customMap.name}", "#{customMap.layer}", "#{customMap.minZoom}",  "#{customMap.maxZoom}",  "#{customMap.opacity}", "#{customMap.pngFormat}", selected);
				i = i + 1;
			</ui:repeat>
			if (i > 0) {
				portalmap.addOverlaysControl();
			}
		}
	</script>
	
</ui:composition>

</html>
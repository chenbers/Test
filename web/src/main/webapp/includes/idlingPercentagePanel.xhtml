<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
	            xmlns:ui="http://java.sun.com/jsf/facelets"
	            xmlns:h="http://java.sun.com/jsf/html" 
	            xmlns:rich="http://richfaces.org/rich"
	            xmlns:a4j="http://richfaces.org/a4j"
	            xmlns:c="http://java.sun.com/jstl/core"
	            xmlns:f="http://java.sun.com/jsf/core"
	            xmlns:t="http://myfaces.apache.org/tomahawk"
	            xmlns:pretty="http://ocpsoft.com/prettyfaces">

    <!--<t:saveState value="#{idlePercentageBean.groupID}"/>-->
    <a4j:outputPanel id="idlePercentageOutputPanel">
    	<div class="">
    		<div class="panel_nw">
    			<div class="panel_title" style="z-index: #{zorder}">
    				<ui:param name="TitleMsgKey" value="idling_percentage_title"/>
    			
    				<span class="line">
    					<h:outputText value="#{messages[TitleMsgKey]}"/>
    				</span>  
                    <ui:include src="/includes/durationPanelHeader.xhtml">
                        <ui:param name="reRenderList" value="idlePercentageOutputPanel" />
                        <ui:param name="bean" value="#{idlePercentageBean}" />
                        <ui:param name="report" value="IDLE_PERCENTAGE" />
                        <ui:param name="includeDetailsLink" value="false"/>
                        <ui:param name="maximized" value="#{false}"/>
                        <ui:param name="context" value="#{context}-idlingPercentagePanel"/>
                    </ui:include>
    			</div>
    		</div>	
    		
    		<div class="panel_w">
    			<rich:panel bodyClass="panel_content" id="idlePercentagePanel" border="0">
                   	<table width="#{xywidth}-50" border="0" cellspacing="2" cellpadding="4" align="center">
                          <tr>
                            <td width="50%"><h:outputText value="#{messages.idling_percentage_driving_title}"/></td>
                            <td><h:outputText id="totalDriving" value="#{idlePercentageBean.totalDriving}"/></td>
                          </tr>
                          <tr>
                            <td width="50%"><h:outputText value="#{messages.idling_percentage_idling_title}" /></td>
                            <td><h:outputText value="#{idlePercentageBean.totalIdling}" /></td>
                          </tr>
                     </table>
                	<div style="height:#{xyheight};width:#{xywidth}">
                   	<div id="idlePercentChartdiv" align="center"/>
		  			<h:inputHidden value="#{idlePercentageBean.chartDef}" id="#{context}-hiddenIPChartField"/>
	<ui:param name="errorMessageListIP" value="?PBarLoadingText=#{messages.chartPBarLoading}&amp;XMLLoadingText=#{messages.chartXMLLoading}&amp;ParsingDataText=#{messages.chartParsingData}&amp;ChartNoDataText=#{messages.chartChartNoData}&amp;RenderingChartText=#{messages.chartRenderingChart}&amp;LoadDataErrorText=#{messages.chartLoadDataError}&amp;InvalidXMLText=#{messages.chartInvalidXML}"/>
					<script type="text/javascript">
						var targetChartElement = document.getElementById("#{context}-hiddenIPChartField");
						var chart2 = new FusionCharts("#{facesContext.externalContext.request.contextPath}/fusioncharts/MSStackedColumn2DLineDY.swf#{errorMessageListIP}", "ChartId", "#{xywidth}", "#{xyheight}", "0", "1");										
						chart2.setDataXML(targetChartElement.value);	
						chart2.setTransparent(true);								   	   
						chart2.render("idlePercentChartdiv");
					</script>
					</div>
                   	<table width="#{xywidth}" border="0" cellspacing="2" cellpadding="4" align="center">
						<tr><td>
	    					<h:outputFormat value="#{messages.idling_percentage_stats_msg}" >
	    						<f:param value="#{idlePercentageBean.totalEMUVehicles}" />
	    						<f:param value="#{idlePercentageBean.totalVehicles}" />
			    			</h:outputFormat>
	    				</td></tr>
					</table>
    			</rich:panel>
    			
    		</div>
    		<div class="panel_sw">
    			<div class="panel_statusbar"></div>
    		</div>
    	</div>
    </a4j:outputPanel>
		
</ui:composition>	
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
                xmlns:pretty="http://ocpsoft.com/prettyfaces"
                xmlns:a4j="http://richfaces.org/a4j">

<script type="text/javascript">
	//<![CDATA[

  		// Disabling the select box stops the dropdown list happening 
  		var clickDown=false;
  		 function dropdown_mousedown(dropdown, listbox, newFocus) { 
  			 var focusStr = ''; 
  			 dropdown.disabled = true; 
  			 if (!listbox.disabled) { 
  				 clickDown = true; 
  				 focusStr = 'document.getElementById("' + dropdown.id + '").focus();' 
  			  } else { 
  				  newFocus.focus(); 
  		      } 
  		      setTimeout( 'document.getElementById("' + dropdown.id + '").disabled=false;' + focusStr ,10); 
  		} 

  		function dropdown_mouseup(dropdown, listbox) { 
  			if(!clickDown) { 
  				listbox.disabled=false;
  				listbox.style.top=dropdown.offsetHeight + findSelPosY(dropdown); // dropdown.offsetTop; 
  				listbox.style.left=findSelPosX(dropdown); // dropdown.offsetLeft;
  				listbox.style.zIndex=1000; 
  				 
  				for(var i = 0; i < dropdown.length;i++) { 
  					listbox.options[i] = new Option(dropdown.options[i].text, dropdown.options[i].value, dropdown.options[i].defaultSelected, dropdown.options[i].selected); 
  				} 
  				listbox.style.display='block'; 
  				listbox.focus(); 
  			} else { 
  				clickDown = false; 
  			} 
  		} 

  		function findSelPosY(obj) {
  			var posTop = 0;
  			while (obj.offsetParent) {posTop += obj.offsetTop; obj = obj.offsetParent;}
  			return posTop;
  		}
  		function findSelPosX(obj) {
  			var posLeft = 0;
  			while (obj.offsetParent) {posLeft += obj.offsetLeft; obj = obj.offsetParent;}
  			return posLeft;
  		}
  		  		

  		function select_click(dropdown, listbox) { 
  			dropdown.selectedIndex=listbox.selectedIndex; 
  			dropdown.focus(); 
  			listbox.style.display='none'; 
  			listbox.length = 0; 
  			listbox.disabled=true; 
  		} 

  		function select_blur(dropdown, listbox) { 
  			listbox.style.display='none'; 
  			listbox.disabled=true; 
  			if(!dropdown.disabled) { 
  				dropdown.focus(); 
  			} 
  		} 

  		function select_keypress(dropdown, listbox, event) { 
  			var charCode; 
  			if (event.keyCode) 
  				charCode = event.keyCode; 
  			else if (event.which) 
  				charCode = event.which; 
  			if ( (charCode == 13) || (charCode == 32)) { 
  				select_click(dropdown, listbox); 
  			} 
  		} 
  	//]]> 
</script>

	  	 	<input type='text' id='dummy' style='width:1px;height:1px;border:none'/>
	  	 	<h:selectOneMenu value="#{selectValue}" id="#{context}_groupID" style="width:#{width};float:none;"
	  	 		onmousedown="dropdown_mousedown(this,document.getElementById('foo'),document.getElementById('dummy'));" 
	  	 		onmouseup="dropdown_mouseup(this, document.getElementById('foo'));">
 		            		<f:selectItem itemLabel="" />
     		            	<f:selectItems value="#{selectList}" />
			</h:selectOneMenu>
			<select id="foo" size="20" style="display:none;width:400px;position:absolute;" 
					onclick="select_click(document.getElementById('#{outerContext}#{context}_groupID'), this);" 
					onblur="select_blur(document.getElementById('#{outerContext}#{context}_groupID'), this)" 
					onkeypress="select_keypress(document.getElementById('#{outerContext}#{context}_groupID'), this, event);" 
					disabled="disabled"> 
			</select>

</ui:composition>
<ui:composition 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
  	xmlns:iwi="http://pro.tiwi.com/jsf"
	xmlns:h="http://java.sun.com/jsf/html">
	
<script type="text/javascript">
	function renderPie(pieElement, pieDiv, width, height)
	{
		var pieDef = document.getElementById(pieElement);
		var pieChart = new FusionCharts("/tiwipro/fusioncharts/Pie2D.swf", "ChartId", width, height, "0", "0");										
		pieChart.setDataXML(pieDef.value);									   	   
		pieChart.render(pieDiv);
	}
	function renderTypePie(type, width, height)
	{
		renderPie('tab_'+type+'Def', 'tab_'+type+'Div', width, height); 
	}
</script>
		
<!-- START PANEL -->
<h:panelGroup layout="block">
	<h:panelGroup layout="block" styleClass="panel_nw">
		<h:panelGroup layout="block" styleClass="panel_title">
			<span class="line">#{messages.team_overview}</span>
			<span class="panel_links"/>
		</h:panelGroup>				
	</h:panelGroup>				
	<h:panelGroup layout="block" styleClass="panel_w">
		<h:panelGroup layout="block" styleClass="panel_content">
			<h:panelGrid width="920" border="0" cellspacing="0" cellpadding="0" align="center" style="margin: 10px auto 0 auto;" columns="2" columnClasses="ls_tabs">
					<table width="130" border="0" cellpadding="0" cellspacing="0">
						<a4j:form id="overview-form">
						      <ui:repeat value="#{teamOverviewBean.actions}" var="action" id="menu">
						        <tr>
						          <td valign="top" class="#{(action.key == teamOverviewBean.selectedAction.key) ? 'ls_tab_on' : 'ls_tab_off'}">
						            <h:commandLink value="#{action.displayString}" styleClass="#{action.style}">
						            	<f:setPropertyActionListener target="#{teamOverviewBean.selectedAction}" value="#{action}" />
            							<a4j:support event="oncomplete" reRender="menu,overall,drivestyle" />
						            </h:commandLink>	
						          </td>
						        </tr>
						      </ui:repeat>
						</a4j:form>
						</table>
				<h:panelGroup>
					<a4j:region id="overall" rendered="#{teamOverviewBean.selectedAction.key == 'overall'}">
						<ui:include src="/includes/teamOverviewTab_overall.xhtml" />
					</a4j:region>
					<ui:repeat value="#{teamOverviewBean.actions}" var="tab" id="tabs">
						<a4j:region rendered="#{teamOverviewBean.selectedAction.key != 'overall' and teamOverviewBean.selectedAction.key == tab.key}">
							<ui:include src="/includes/teamOverviewTab.xhtml">
								<ui:param name="style" value="#{tab.style}" />
								<ui:param name="title" value="#{tab.displayString}" />
								<ui:param name="type" value="#{tab.key}" />
							</ui:include>
						</a4j:region>
					</ui:repeat>
				</h:panelGroup>
			</h:panelGrid>
		</h:panelGroup>
	</h:panelGroup>
	<h:panelGroup layout="block" styleClass="panel_sw">
		<h:panelGroup layout="block" styleClass="panel_statusbar"/>
	</h:panelGroup>
</h:panelGroup>
<!-- END PANEL -->
	
	
</ui:composition>
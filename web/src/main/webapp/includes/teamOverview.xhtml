<ui:composition 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
  	xmlns:iwi="http://pro.tiwi.com/jsf"
	xmlns:h="http://java.sun.com/jsf/html">
	<ui:param name="errorMessageListTeamOverview" value="?PBarLoadingText=#{messages.chartPBarLoading}&amp;XMLLoadingText=#{messages.chartXMLLoading}&amp;ParsingDataText=#{messages.chartParsingData}&amp;ChartNoDataText=#{messages.chartChartNoData}&amp;RenderingChartText=#{messages.chartRenderingChart}&amp;LoadDataErrorText=#{messages.chartLoadDataError}&amp;InvalidXMLText=#{messages.chartInvalidXML}"/>
	
<script type="text/javascript">
	function renderBar(barElement, barDiv, width, height)
	{
		var barDef = document.getElementById(barElement);
		var barChart = new FusionCharts("#{facesContext.externalContext.request.contextPath}/fusioncharts/MSCombi3D.swf#{errorMessageListTeamOverview}", "ChartId", width, height, "0", "0");
		barChart.addVariable("ChartNoDataText", "#{messages.chartChartNoData}");
		barChart.setDataXML(barDef.value);	
		barChart.setTransparent(true);								   	   
		barChart.render(barDiv);
	}
	function renderTypeBar(type, width, height)
	{
		renderBar('tab_'+type+'Def', 'tab_'+type+'Div', width, height); 
	}
</script>
		
<!-- START PANEL -->
<h:panelGroup layout="block">
	<h:panelGroup layout="block" styleClass="panel_nw">
		<h:panelGroup layout="block" styleClass="panel_title" id="overview-header">
			<span class="line">#{messages.team_overview}</span>
				<a4j:region rendered="#{teamOverviewBean.selectedAction.key != 'seatbelt'}" >
				<ui:include src="/includes/dateLinks.xhtml" >
					<ui:param name="ajaxForm" value="overviewDates-form"/>
					<ui:param name="ajaxStatusID" value="overviewStatus"/>
					<ui:param name="reRenderList" value="overviewDates-form,overview-form,overview-content,teamTopTables"/>			
					<ui:param name="thirtyDaysOn" value="#{teamOverviewDurationBean.styleClass30Days}"/>
					<ui:param name="threeMonthsOn" value="#{teamOverviewDurationBean.styleClass3Months}"/>
					<ui:param name="sixMonthsOn" value="#{teamOverviewDurationBean.styleClass6Months}"/>
					<ui:param name="twelveMonthsOn" value="#{teamOverviewDurationBean.styleClass12Months}"/>
					<ui:param name="duration" value="#{teamOverviewDurationBean.duration}" />
                    <ui:param name="context" value="#{context}-teamOverview"/> 
				</ui:include>
				</a4j:region>	
		</h:panelGroup>				
	</h:panelGroup>				
	<h:panelGroup layout="block" styleClass="panel_w">
		<h:panelGroup layout="block" styleClass="panel_content">
			<h:panelGrid width="920" border="0" cellspacing="0" cellpadding="0" align="center" style="margin: 10px auto 0 auto;" >
				<h:panelGroup>
					<a4j:form id="overview-form">
               
					<ul class="htabs">
   				      <ui:repeat value="#{teamOverviewBean.actions}" var="action" id="menu">
                            <li class="#{(action.key == teamOverviewBean.selectedAction.key) ? 'active' : 'inactive'}" onclick="#{action.key}_setTabActive();"> 
                                 <div class="tabLeft">
         							<div class="tabRight">
                                      <div class="tabBorder">
                                         <span class="#{action.key} tab">
                                                <a4j:commandLink id="#{context}-teamOverviewDisplay" title="#{action.displayString}" reRender="overview-header,overview-form,overview-content,duration-links"
                                                      value="#{action.displayString}">
                                                      <f:setPropertyActionListener target="#{teamOverviewBean.selectedAction}" value="#{action}" />
                                                </a4j:commandLink>   
                                          </span>
                                       </div>
                                     </div>
                                 </div>
                             </li>
                              
                             <a4j:jsFunction name="#{action.key}_setTabActive" reRender="overview-header,overview-form,overview-content,duration-links">
                               <f:setPropertyActionListener target="#{teamOverviewBean.selectedAction}" value="#{action}" />
                             </a4j:jsFunction>
                             
   				      </ui:repeat>
 					</ul>
                     
					</a4j:form>
				</h:panelGroup>
				
				<h:panelGroup id="overview-content">
					<ui:repeat value="#{teamOverviewBean.actions}" var="tab" id="tabs">
						<a4j:region rendered="#{teamOverviewBean.selectedAction.key == tab.key}">
							<ui:include src="/includes/teamOverviewTab.xhtml">
								<ui:param name="type" value="#{tab.key}" />
                    			<ui:param name="context" value="#{context}-teamOverview"/> 
							</ui:include>
						</a4j:region>
					</ui:repeat>
				</h:panelGroup>
			</h:panelGrid>
		</h:panelGroup>
	</h:panelGroup>
	<h:panelGroup layout="block" styleClass="panel_sw">
		<h:panelGroup layout="block" styleClass="panel_statusbar"/>
	</h:panelGroup>
</h:panelGroup>
<!-- END PANEL -->
	
	
</ui:composition>
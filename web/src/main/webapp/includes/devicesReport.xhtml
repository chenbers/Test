<ui:composition 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
  	xmlns:iwi="http://pro.tiwi.com/jsf"
	xmlns:h="http://java.sun.com/jsf/html">
		
		
			<div class="datagrid">
			<div class="spacer"></div> 
			
		
			
        	<rich:datascroller id="topScroller" for="items" immediate="true"
        		scrollerListener="#{deviceReportBean.scrollerListener}"
        		reRender="bottomScroller,items,headerDevices"
        		requestDelay="200" eventsQueue="pagerQueue">
        	</rich:datascroller>
			      		        						
				<rich:dataTable value="#{deviceData}" id="items"
					var="item" styleClass="datagrid" 
					rowClasses="trendTableOdd,trendTableEven" cellspacing="1" 
					rows="#{numRowsPerPg}"
					width="100%">

					<rich:column rendered="#{deviceColumns['device_name'].visible}" 
						sortBy="#{item.device.name}">
						<f:facet name="header">
							<h:outputText value="#{messages.reports_deviceid}" />
						</f:facet>							
						<h:outputText value="#{item.device.name}"/>										
    				</rich:column>
    				<rich:column rendered="#{deviceColumns['vehicle_name'].visible}" 
    					sortBy="#{item.vehicle.name}">
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_assignedvehicle}" />
      					</f:facet>
						<a4j:htmlCommandLink action="go_vehicle" 
      						value="#{item.vehicle.name}">
							<f:setPropertyActionListener 
									value="#{item.vehicle}" 
									target="#{navigationBean.vehicle}">
							</f:setPropertyActionListener>
						</a4j:htmlCommandLink>  	      
    				</rich:column>
    				<rich:column rendered="#{deviceColumns['device_imei'].visible}" 
    					sortBy="#{item.device.imei}">    					
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_imei}" />
      					</f:facet>
      					<h:outputText value="#{item.device.imei}" />    					     					
    				</rich:column>
    				<rich:column rendered="#{deviceColumns['device_phone'].visible}" 
    					sortBy="#{item.device.phone}">
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_devicephonenbr}" />
      					</f:facet>
      					<h:outputText value="#{item.device.phone}" />   
    				</rich:column>
    				<rich:column rendered="#{deviceColumns['device_status'].visible}" 
    					sortBy="#{item.device.status}">
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_status}" />
      					</f:facet>
      					<h:outputText value="#{item.device.status}" />
    				</rich:column>  
    				<rich:column rendered="#{deviceColumns['device_ephone'].visible}" 
    					sortBy="#{item.device.ephone}">
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_ecallphonenbr}" />
      					</f:facet>
      					<h:outputText value="#{item.device.ephone}" />
    				</rich:column>   		
    			</rich:dataTable>    	
    			
    			<rich:datascroller id="bottomScroller" for="items" immediate="true"
    				scrollerListener="#{deviceReportBean.scrollerListener}"
        			reRender="topScroller,items,headerDevices"
        			requestDelay="200" eventsQueue="pagerQueue">        			
        		</rich:datascroller>
        		
        	
        		
			</div>
		

</ui:composition>
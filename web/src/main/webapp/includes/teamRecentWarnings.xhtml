<ui:composition 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
  	xmlns:iwi="http://pro.tiwi.com/jsf"
	xmlns:h="http://java.sun.com/jsf/html">
<h:panelGroup layout="block" styleClass="">
	<h:panelGroup layout="block" styleClass="panel_nw">
		<h:panelGroup layout="block" styleClass="panel_title">
			<span class="line">#{messages.team_warnings}</span>
			<span class="panel_links">
			<h:form id="teamWarningsShowAllForm">
				<h:commandLink action="go_redFlags" value="#{messages.team_warningsShowAll}">
					<f:setPropertyActionListener value="#{teamWarningsBean.category}" target="#{redFlagsBean.categoryFilter}" />
				</h:commandLink>
			</h:form>	
			</span>
		</h:panelGroup>	
	</h:panelGroup>					
	<h:panelGroup layout="block" styleClass="panel_w">
		<h:panelGroup layout="block" styleClass="panel_content">
			<h:panelGroup layout="block" styleClass="datagrid">
			<h:form id="teamWarningsForm">
			<rich:dataTable value="#{teamWarningsBean.warnings}" id="teamWarnings"
						var="event" styleClass="datagrid"
						rowClasses="trendTableOdd,trendTableEven" cellspacing="0" rows="5"
						width="100%">
					<rich:column sortBy="#{event.eventType}" width="20%" height="27" >
						<f:facet name="header">
							<h:outputText value="#{messages.team_warningWarning}" />
						</f:facet>
						<h:outputText value="#{event.eventType}"/>
					</rich:column>
					<rich:column sortBy="#{event.vehicleName}" width="15%" height="27" >
						<f:facet name="header">
							<h:outputText value="#{messages.team_warningVehicle}" />
						</f:facet>
						<!-- TODO:  hook up vehicle link to correct page -->
						<h:commandLink action="go_vehicle" value="#{event.vehicleName}">
 							<f:setPropertyActionListener value="#{event.event.vehicle}" target="#{navigationBean.vehicle}" />
						</h:commandLink>
					</rich:column>
					<rich:column sortBy="#{event.driverName}" width="45%" height="27" >
						<f:facet name="header">
							<h:outputText value="#{messages.team_warningDriver}" />
						</f:facet>
						<h:commandLink action="go_driver" value="#{event.driverName}">
							<f:setPropertyActionListener value="#{event.event.driver}" target="#{teamWarningsBean.navigation.driver}" />
						</h:commandLink>
					</rich:column>
					<rich:column sortBy="#{event.time}" width="15%" height="27" >
						<f:facet name="header">
							<h:outputText value="#{messages.team_warningWhen}"/>
						</f:facet>
						<h:outputText value="#{event.dateStr}"/>
					</rich:column>
					<rich:column width="5%" height="27" >
						<f:facet name="header">
							<h:outputText value="" />
						</f:facet>
						<h:commandLink action="go_redFlags" value="#{messages.team_warningDetails}">
							<f:setPropertyActionListener value="#{event.event}" target="#{redFlagsBean.eventFilter}" />
						</h:commandLink>
					</rich:column>
			</rich:dataTable>
			</h:form>		
			</h:panelGroup>					
			</h:panelGroup>					
	</h:panelGroup>					
	<h:panelGroup layout="block" styleClass="panel_sw">
		<h:panelGroup layout="block" styleClass="panel_statusbar"/>
	</h:panelGroup>
</h:panelGroup>
</ui:composition>
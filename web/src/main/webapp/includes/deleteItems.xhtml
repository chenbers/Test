<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

<!--
  A pop-up modal form that allows confirming a delete.

  Required Parameters:
  ==============
           reRender:  Id['s] (in format of call UIComponent.findComponent()) of components, rendered in case
                      of AjaxRequest caused by this component. Can be single id, comma-separated list of Id's,
                      or EL Expression with array or Collection.
         deleteBean:  A bean that has a method named saveColumns(), called when the save button is clicked.

  To use:
  ==============
      <ui:include src="/includes/deleteItems.xhtml">
        <ui:param name="reRender" value="myStuff" />
        <ui:param name="deleteBean" value="#{myBean}" />
      </ui:include>
-->

  <ui:composition>

    <c:if test="#{(allColumnsCount % 3) == 0}">
      <c:set var="columnCount" value="#{allColumnsCount / 3}" />
    </c:if>
    <c:if test="#{(allColumnsCount % 3) != 0}">
      <c:set var="columnCount" value="#{(allColumnsCount / 3) + 1}" />
    </c:if>

    <rich:modalPanel id="deleteItems" headerClass="popupHeader" controlsClass="popupControls" width="500" height="140" zindex="2001">
      <f:facet name="header">
        <h:outputText value="#{messages.deleteItems_title}" />
      </f:facet>
      <f:facet name="controls">
        <h:graphicImage value="/images/modal_close.png" style="cursor:pointer" onclick="Richfaces.hideModalPanel('deleteItems')" />
      </f:facet>

      <div class="popupsubtitle"><h:outputText value="#{messages.deleteItems_explanation}" /></div>

      <a4j:form id="deleteItemsForm">

        <div class="popupactions">
          <button value="submit" class="left" onclick="Richfaces.hideModalPanel('deleteItems'); return false;"><span class="cancel"><h:outputText value="#{messages.button_cancel}" /></span></button>
          <a4j:commandLink action="#{deleteBean['delete']}" onclick="Richfaces.hideModalPanel('deleteItems')" reRender="#{reRender}"><button value="submit" class="left"><span class="delete"><h:outputText value="#{messages.button_delete}" /></span></button></a4j:commandLink>
        </div>

      </a4j:form>

    </rich:modalPanel>

  </ui:composition>

</html>
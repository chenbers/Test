<ui:composition
			xmlns="http://www.w3.org/1999/xhtml" 
			xmlns:ui="http://java.sun.com/jsf/facelets"
  			xmlns:h="http://java.sun.com/jsf/html" 
  			xmlns:f="http://java.sun.com/jsf/core"
			xmlns:rich="http://richfaces.org/rich"
		    xmlns:a4j="http://richfaces.org/a4j"
  			xmlns:security="http://www.springframework.org/security/tags">

  <style>
.rich-message {margin:5px;display:block;}
  </style>
  
  <a4j:form id="changePasswordForm">
    <table cellspacing="0" cellpadding="4" border="0" width="415" style="margin: 5px; font-size: 10px;">
      <tbody>
        <tr>
          <td><h:outputText value="#{messages.myAccount_current_password}" />:</td>
          <td>
            <h:inputSecret id="oldPassword" label="Old Password" size="40"
                      binding="#{changePasswordBean.oldPasswordInput}"
                      required="true" validator="#{changePasswordBean.validateNewPassword}">
              <f:validateLength minimum="6" maximum="12" />
            </h:inputSecret>
            <rich:message for="oldPassword">
              <f:facet name="errorMarker">
                <h:graphicImage value="/images/icon_msg_err_small.png" />
              </f:facet>
            </rich:message>
          </td>
        </tr>
        <tr>
          <td><h:outputText value="#{messages.myAccount_new_password}" />:</td>
          <td>
            <h:inputSecret id="newPassword" label="New Password" size="40"
                      binding="#{changePasswordBean.newPasswordInput}"
                      required="true" validator="#{changePasswordBean.validateMatchingPasswords}">
              <f:validateLength minimum="6" maximum="12" />
            </h:inputSecret>
            <rich:message for="newPassword">
              <f:facet name="errorMarker">
                <h:graphicImage value="/images/icon_msg_err_small.png" />
              </f:facet>
            </rich:message>
          </td>
        </tr>
        <tr>
          <td><h:outputText value="#{messages.myAccount_confirm_new_password}" />:</td>
          <td>
            <h:inputSecret id="confirmPassword" label="Confirm New Password" size="40"
                      binding="#{changePasswordBean.confirmPasswordInput}"/>
          </td>
        </tr>
      </tbody>
    </table>

    <div>
      <rich:message for="email">
        <f:facet name="errorMarker">
          <h:graphicImage value="/images/icon_msg_err_small.png" />
        </f:facet>
      </rich:message>
    </div>
    <div class="popupactions">
      <button type="submit" class="left" onclick="Richfaces.hideModalPanel('changePasswordPanel'); return false;"><span class="cancel"><h:outputText value="#{messages.button_cancel}" /></span></button>
      <a4j:commandButton onclick="" reRender="#{reRender}" action="#{changePasswordBean.changePasswordAction}" styleClass="left"><span class="save"><h:outputText value="Save" /></span></a4j:commandButton>
    </div>
    
    <div style="clear:both"></div>
  
  </a4j:form>
	
  
  

</ui:composition>
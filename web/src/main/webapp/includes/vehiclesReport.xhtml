<ui:composition 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
  	xmlns:iwi="http://pro.tiwi.com/jsf"
	xmlns:h="http://java.sun.com/jsf/html">
		
		<h:form id="vehicleReportTableForm">
			<div class="datagrid">
        	<rich:datascroller id="topScroller" for="items" 
        		scrollerListener="#{vehicleReportBean.scrollerListener}"
        		reRender="bottomScroller,items,start,end,max">
        	</rich:datascroller>
        						
				<rich:dataTable value="#{vehicleData}" id="items"
					var="item" styleClass="datagrid"
					rowClasses="trendTableOdd,trendTableEven" cellspacing="1" 
					rows="#{numRowsPerPg}"
					width="100%" binding="#{vehicleTable}">

					<!-- Data -->
					<rich:column rendered="#{vehicleColumns['group']}" 
						sortBy="#{item.group}">
						<f:facet name="header">
							<h:outputText value="Group" />
						</f:facet>
						<a4j:commandLink action="go_team" value="#{item.group}">      					
							<f:setPropertyActionListener 
								value="#{item.groupID}" 
								target="#{navigationBean.groupID}">
							</f:setPropertyActionListener>
						</a4j:commandLink>  
    				</rich:column>
    				<rich:column rendered="#{vehicleColumns['vehicleID']}" 
    					sortBy="#{item.vehicleID}">
      					<f:facet name="header">
      						<h:outputText value="VehicleID" />
      					</f:facet>
						<a4j:commandLink action="go_vehicle" value="#{item.vehicleID}">      						   					      					
							<f:setPropertyActionListener 
								value="#{item.driver}" 
								target="#{driverBean.driver}">
							</f:setPropertyActionListener>
						</a4j:commandLink>  
    				</rich:column>
    				<rich:column rendered="#{vehicleColumns['makeModelYear']}" 
    					sortBy="#{item.makeModelYear}">
      					<f:facet name="header">
      						<h:outputText value="Make/Model/Year" />
      					</f:facet>
      					<h:outputText value="#{item.makeModelYear}" />     
    				</rich:column>
    				<rich:column rendered="#{vehicleColumns['driver']}" 
    					sortBy="#{item.driver}">
      					<f:facet name="header">
      						<h:outputText value="Driver" />
      					</f:facet>
      					<a4j:commandLink value="#{item.driver.person.first} #{item.driver.person.last}" 
      						reRender="items" action="go_driver">      						    					      					
							<f:setPropertyActionListener 
								value="#{item.driver}" 
								target="#{driverBean.driver}">
							</f:setPropertyActionListener>
						</a4j:commandLink>    					
    				</rich:column>
    				<rich:column rendered="#{vehicleColumns['milesDriven']}" 
    					sortBy="#{item.milesDriven}">
      					<f:facet name="header">
      						<h:outputText value="Miles Driven" />
      					</f:facet>
      					<h:outputText value="#{item.milesDriven}" />
    				</rich:column>
    				<rich:column rendered="#{vehicleColumns['overall']}">
      					<f:facet name="header">
      						<h:outputText value="Overall" />
      					</f:facet>
      					<a4j:commandLink reRender="items" action="go_vehicle">
      						<iwi:scoreBox style="#{item.styleOverall}" 
      							score="#{item.overallScore}"/>      					      					
							<f:setPropertyActionListener 
								value="#{item.driver}" 
								target="#{driverBean.driver}">
							</f:setPropertyActionListener>
						</a4j:commandLink>  
    				</rich:column>
    				<rich:column rendered="#{vehicleColumns['speed']}">
      					<f:facet name="header">
      						<h:outputText value="Speed" />
      					</f:facet>
            			<a4j:commandLink action="go_vehicle">
      						<iwi:scoreBox style="#{item.styleSpeed}" 
      							score="#{item.speedScore}"/>      					      					
							<f:setPropertyActionListener 
								value="#{item.driver}" 
								target="#{driverBean.driver}">
							</f:setPropertyActionListener>
						</a4j:commandLink>
    				</rich:column>
    				<rich:column rendered="#{vehicleColumns['style']}">
      					<f:facet name="header">
      						<h:outputText value="Style" />
      					</f:facet>
      					<a4j:commandLink action="go_vehicle">
      						<iwi:scoreBox style="#{item.styleStyle}" 
      							score="#{item.styleScore}"/>      					      					
							<f:setPropertyActionListener 
								value="#{item.driver}" 
								target="#{driverBean.driver}">
							</f:setPropertyActionListener>
						</a4j:commandLink>
    				</rich:column>
    			</rich:dataTable>    			
    			
    		<rich:datascroller id="bottomScroller" for="items" immediate="true"    			
    			scrollerListener="#{vehicleReportBean.scrollerListener}"
        		reRender="topScroller,items,start,end,max">        			
        	</rich:datascroller>
			</div>
		</h:form>

</ui:composition>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:security="http://pro.tiwi.com/jsf/security">



	<div class="add_section_title">#{messages.group_geofence}</div>
	<div style="width: 100%; height: 500px">
	<table style="width: 100%" cellpadding="4" border="0" align="center">
		<tbody>
			<tr>
				<td style="font-weight: bold" width="100"></td>
			</tr>
			<tr>
				<td><h:panelGroup styleClass="map-border" layout="block">
					<div id="map-canvas" style="width: 500px; height: 500px; border: 0"></div>
				</h:panelGroup> <script type="text/javascript">

								function updateGroupNode(){
									var latLng = map.getCenter();
									updateGroup(null,latLng.lat(),latLng.lng(),map.getZoom());
								}
														    
	      						if (GBrowserIsCompatible()) {
	        						map = new GMap2(document.getElementById("map-canvas"));
	        						map.addControl(new GLargeMapControl());
	        						map.addControl(new GMapTypeControl());
									map.setMapType(G_NORMAL_MAP);
									map.setCenter(new GLatLng(#{groupTreeNode.group.mapCenter.lat},#{groupTreeNode.group.mapCenter.lng}),#{groupTreeNode.group.mapZoom});
		      					}
	    					</script> <a4j:jsFunction name="updateGroup"
					action="#{organizationBean.updateGroupNode}"
					reRender="groupContent,buttonPanel,organizationTreePanel">
					<a4j:actionparam name="state" value="VIEW"
						assignTo="#{organizationBean.groupState}" />
					<a4j:actionparam name="latitude"
						assignTo="#{groupTreeNode.group.mapCenter.lat}" />
					<a4j:actionparam name="longitude"
						assignTo="#{groupTreeNode.group.mapCenter.lng}" />
					<a4j:actionparam name="zoomLevel"
						assignTo="#{groupTreeNode.group.mapZoom}" />
				</a4j:jsFunction></td>
			</tr>
			<tr>
				<td></td>
			</tr>
		</tbody>

	</table>
	</div>
</ui:composition>
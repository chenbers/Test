<ui:composition
			xmlns="http://www.w3.org/1999/xhtml" 
			xmlns:ui="http://java.sun.com/jsf/facelets"
  			xmlns:h="http://java.sun.com/jsf/html" 
  			xmlns:f="http://java.sun.com/jsf/core"
			xmlns:rich="http://richfaces.org/rich"
		    xmlns:a4j="http://richfaces.org/a4j"
  			xmlns:security="http://www.springframework.org/security/tags">


	<rich:modalPanel id="passwordReminderPanel" headerClass="popupHeader" controlsClass="popupControls" 
            height="50" autosized="true" resizeable="false" zindex="2000" width="300">
	    <f:facet name="header">
	      <h:outputText value="Update Password Reminder"/>
	    </f:facet>
	   <f:facet name="controls">
	   	<h:graphicImage value="/images/modal_close.png" onclick="Richfaces.hideModalPanel('passwordReminderPanel')" style="cursor:pointer" />
	   </f:facet>
	    <p>
	      <h:outputFormat value="#{messages.passwordReminder_changeWarn}" escape="false" rendered="#{(personBean.initialLogin) and (personBean.passwordChangeWarn)}">
	         <f:param value="#{personBean.person.fullName}"/>
	      </h:outputFormat>
	    </p>
	    <p>
	      <h:outputFormat value="#{messages.passwordReminder_expiring}" escape="false" rendered="#{personBean.passwordDaysRemaining lt 16}">
	      	 <f:param value="#{personBean.person.fullName}"/>
	         <f:param value="#{personBean.passwordDaysRemaining}"/>
	      </h:outputFormat>
	    </p>
	    
	    <p>
	      <h:outputLink styleClass="tb-logout" onclick="Richfaces.hideModalPanel('passwordReminderPanel');Richfaces.showModalPanel('changePasswordPanel');return false;">Change your password.</h:outputLink>
	    </p>   
	</rich:modalPanel>

	<f:verbatim rendered="#{((personBean.passwordDaysRemaining lt 16)  or ((personBean.initialLogin) and (personBean.passwordChangeWarn))  and not personBean.passwordUpdated)}">
		<script type="text/javascript">
	    	Richfaces.showModalPanel('passwordReminderPanel');
	    </script> 
    </f:verbatim>
    
	<ui:include src="/includes/changePassword.xhtml" />
	<f:verbatim rendered="#{(personBean.passwordChangeRequired)}">
		<script type="text/javascript">
	    	Richfaces.showModalPanel('changePasswordPanel');
	    </script> 
    </f:verbatim>
</ui:composition>
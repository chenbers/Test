<ui:composition 
            xmlns="http://www.w3.org/1999/xhtml" 
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html" 
            xmlns:rich="http://richfaces.org/rich"
            xmlns:a4j="http://richfaces.org/a4j"
            xmlns:iwi="http://pro.tiwi.com/jsf"
            xmlns:c="http://java.sun.com/jstl/core"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:t="http://myfaces.apache.org/tomahawk"
            xmlns:pretty="http://ocpsoft.com/prettyfaces">
            
<h:panelGroup layout="block" styleClass="">
	<h:panelGroup layout="block" styleClass="panel_nw">
		<h:panelGroup layout="block" styleClass="panel_title">
			<span class="event">#{messages.team_safetyEvents}</span>
			<span class="panel_links">
            <pretty:link id="#{context}-teamRecentSafetyWithGroupId" mappingId="safetyWithGroupID">
                <f:param name="groupID" value="#{navigationBean.groupID}"/>
                #{messages.team_safetyEventsShowAll}
            </pretty:link>
			</span>
		</h:panelGroup>	
	</h:panelGroup>					
	<h:panelGroup layout="block" styleClass="panel_w">
		<h:panelGroup layout="block" styleClass="panel_content">
			<h:panelGroup layout="block" styleClass="datagrid">
			<h:form id="teamRecentEventsForm">
			<rich:dataTable value="#{teamRecentEventsBean.recentEvents}" id="teamRecentEvents"
						var="event" styleClass="datagrid"
						rowClasses="tableOdd,tableEven" cellspacing="0" rows="5"
						width="100%" sortMode="multi">
					<rich:column height="50" width="30%">
						<f:facet name="header">
							<h:outputText value="#{messages.team_safetyEventsEvent}" />
						</f:facet>
						<h:outputText value="#{event.eventType}"/>
					</rich:column>
					<rich:column width="35%">
						<f:facet name="header" >
							<h:outputText value="#{messages.team_safetyEventsDriver}" />
						</f:facet>
                        <pretty:link id="#{context}-teamRecentSafetyDriverPerformance" mappingId="driverPerformance">
                            <f:param value="#{event.event.driver.driverID}"/>
                            #{event.driverName}
                        </pretty:link>
					</rich:column>
					<rich:column width="25%">
						<f:facet name="header">
							<h:outputText value="#{messages.team_safetyEventsWhen}"/>
						</f:facet>
						<h:outputText value="#{event.dateStr}"/>
					</rich:column>
					<rich:column width="10%">
						<f:facet name="header">
							<h:outputText value="" />
						</f:facet>
                        <!-- this is a hack, <c:if> would not work inside <rich:column>, need to come back to this and clean it up -->            
                        <pretty:link id="#{context}-teamRecentSafetySpeedOrStyle" mappingId="#{event.event.eventType == 'SPEEDING' ? 'driverPerformanceSpeed' : 'driverPerformanceStyle'}">
                            <f:param value="#{event.event.driver.driverID}"/>
                            #{messages.team_safetyEventsDetails}
                        </pretty:link>
					</rich:column>
			</rich:dataTable>
			</h:form>		
			</h:panelGroup>					
			</h:panelGroup>					
	</h:panelGroup>					
	<h:panelGroup layout="block" styleClass="panel_sw">
		<h:panelGroup layout="block" styleClass="panel_statusbar"/>
	</h:panelGroup>
</h:panelGroup>
</ui:composition>
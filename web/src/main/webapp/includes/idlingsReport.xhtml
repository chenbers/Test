<ui:composition 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
  	xmlns:iwi="http://pro.tiwi.com/jsf"
	xmlns:h="http://java.sun.com/jsf/html">
		
		
			<div class="datagrid">
			<div class="spacer"></div> 
						        	        	
        	<table border="0">
        		<tr>
        			<td><h:outputText 
        				id="errMsg" style="color:red"
        				value="#{idlingReportBean.badDates}"/>
        			</td>
        		</tr>
        	</table>					
			
        	<rich:datascroller id="topScroller" for="items" immediate="true" 
        		scrollerListener="#{idlingReportBean.scrollerListener}"
        		reRender="bottomScroller,items,headerIdlings"
        		requestDelay="200" eventsQueue="pagerQueue">
        	</rich:datascroller>
			      		        						
				<rich:dataTable value="#{idlingData}" id="items"
					var="item" styleClass="datagrid" 
					rowClasses="trendTableOdd,trendTableEven" cellspacing="1" 
					rows="#{numRowsPerPg}"
					width="100%" binding="#{idlingTable}">

					<rich:column rendered="#{idlingColumns['group'].visible}" 
						sortBy="#{item.group}">
						<f:facet name="header">
							<h:outputText value="#{messages.reports_group}" />
						</f:facet>
						<h:outputText value="#{item.group}" />   
    				</rich:column>
    				<rich:column rendered="#{idlingColumns['driver_person_fullName'].visible}" 
    					sortBy="#{item.driver.person.last}">
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_driver}" />
      					</f:facet>
						<h:commandLink action="go_driver" 
							value="#{item.driver.person.fullName}">
      						<f:setPropertyActionListener 
								value="#{item.driver}" 
								target="#{navigationBean.driver}">
							</f:setPropertyActionListener>
      					</h:commandLink>       
    				</rich:column>
    				<rich:column rendered="#{idlingColumns['vehicle_name'].visible}" 
    					sortBy="#{item.vehicle.name}">
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_vehicle}" />
      					</f:facet>
      					<h:commandLink action="go_vehicle" 
							value="#{item.vehicle.name}">
      						<f:setPropertyActionListener 
								value="#{item.vehicle}" 
								target="#{navigationBean.vehicle}">
							</f:setPropertyActionListener>
      					</h:commandLink>        								
    				</rich:column>
    				<rich:column rendered="#{idlingColumns['driveTime'].visible}" 
    					sortBy="#{item.driveTime}">    					
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_drivetime}" />
      					</f:facet>
      					<h:outputText value="#{item.driveTime}" />        					
    				</rich:column>    				
    				<rich:column rendered="#{idlingColumns['lowHrs'].visible}" 
    					sortBy="#{item.lowHrs}">
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_lowidlehrs}" />
      					</f:facet>
      					<h:outputText value="#{item.lowHrs}" />
    				</rich:column>
    				<rich:column rendered="#{idlingColumns['lowPercent'].visible}">    					
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_percent}" />
      					</f:facet>
      					<h:outputText value="#{item.lowPercent}" /> 
    				</rich:column>
    				<rich:column rendered="#{idlingColumns['highHrs'].visible}"
    					sortBy="#{item.highHrs}">
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_highidlehrs}" />
      					</f:facet>
      					<h:outputText value="#{item.highHrs}" /> 
    				</rich:column>
    				<rich:column rendered="#{idlingColumns['highPercent'].visible}">
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_percent}" />
      					</f:facet>
      					<h:outputText value="#{item.highPercent}" /> 
    				</rich:column>
    				<rich:column rendered="#{idlingColumns['totalHrs'].visible}"
    					sortBy="#{item.totalHrs}">
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_totalidlehrs}" />
      					</f:facet>      					
      					<h:outputText value="#{item.totalHrs}" /> 
    				</rich:column>
    				
    				<rich:column rendered="#{idlingColumns['totalPercent'].visible}">    					
      					<f:facet name="header">
      						<h:outputText value="#{messages.reports_percent}" />
      					</f:facet>      					
      					<h:outputText value="#{item.totalPercent}" /> 
    				</rich:column>    				
    				<rich:column>
      					<f:facet name="header">
      						<h:outputText value="" />
      					</f:facet>    
      					<h:commandLink action="go_driverTrips" value="#{messages.reports_trips}">
      						<f:setPropertyActionListener 
      							value="#{item.driver}" 
      							target="#{navigationBean.driver}">
      						</f:setPropertyActionListener>
      					</h:commandLink>  					      					
    				</rich:column>
    			</rich:dataTable>    	
    			
    			<rich:datascroller id="bottomScroller" for="items" immediate="true" 
    				scrollerListener="#{idlingReportBean.scrollerListener}"
        			reRender="topScroller,items,headerIdlings"
        			requestDelay="200" eventsQueue="pagerQueue">        			
        		</rich:datascroller>
				</div>
		

</ui:composition>
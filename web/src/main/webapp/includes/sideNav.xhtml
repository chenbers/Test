<html xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<!-- 
  Params:
  ==============
  messagesPrefix: A prefix to prepend to the action to obtain a user-friendly message.
         actions: A comma-separated list of action strings (no spaces after commas).
  selectedAction: The action that's selected; may be a child action.
    parentAction: The action whose child actions are visible; optional.
    childActions: A comma-separated list of child action strings (no spaces after commas).

  Notes:
  ==============
  Link names are calculated by appending messagesPrefix and the action, and using that as a key for
  Messages.properties.  Style names for each link are calculated by prepending "ls_tab_" to the action.

  To use:
  ==============
  <ui:include src="/includes/sideNav.xhtml">
    <ui:param name="messagesPrefix" value="yourMessagePrefix_" />
    <ui:param name="actions" value="action1,action2,action3" />
    <ui:param name="selectedAction" value="action2_a" />
    <ui:param name="parentAction" value="action2" />
    <ui:param name="childActions" value="action2_a,action2_b" />
  </ui:include>

 -->
  <ui:composition>

    <table width="130" border="0" cellpadding="0" cellspacing="0" style="margin-top: 40px;">
      <ui:repeat value="#{fn:split(actions, ',')}" var="action" varStatus="index">
        <tr>
          <td valign="top" class="#{(action == selectedAction) ? 'ls_tab_on' : 'ls_tab_off'}">
            <c:set var="messageKey" value="#{messagesPrefix}#{action}" />
            <h:commandLink action="#{action}" value="#{messages[messageKey]}" styleClass="ls_tab_#{action}" />
          </td>
        </tr>
        <ui:fragment rendered="#{action == parentAction}">
          <tr>
            <td valign="top" class="sub_wrapper">
              <ui:repeat value="#{fn:split(childActions, ',')}" var="childAction" varStatus="childIndex">
                <div class="#{(childAction == selectedAction) ? 'ls_tab_sub_active' : 'ls_tab_sub'}">
                  <c:set var="messageKey" value="#{messagesPrefix}#{childAction}" />
                  <h:commandLink action="#{childAction}" value="#{messages[messageKey]}" styleClass="ls_tab_#{action}" />
                </div>
              </ui:repeat>
            </td>
          </tr>
        </ui:fragment>
      </ui:repeat>
    </table>

  </ui:composition>
</html>
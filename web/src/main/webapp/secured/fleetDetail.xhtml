<ui:composition template="/layout/layout.xhtml" 
					xmlns="http://www.w3.org/1999/xhtml" 
					xmlns:ui="http://java.sun.com/jsf/facelets"
		  			xmlns:h="http://java.sun.com/jsf/html" 
		  			xmlns:rich="http://richfaces.org/rich"
		  			xmlns:a4j="http://richfaces.org/a4j"
		  			xmlns:iwi="http://pro.tiwi.com/jsf"
		  			xmlns:f="http://java.sun.com/jsf/core">
  			
	<ui:define name="scripts">
 		<script src="#{facesContext.externalContext.request.contextPath}/js/FusionCharts.js" type="text/javascript"></script>	
		<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=#{gmBean.key}" type="text/javascript"></script>
	
		<script type="text/javascript" src="#{facesContext.externalContext.request.contextPath}/js/c_config.js"></script>
		<script type="text/javascript" src="#{facesContext.externalContext.request.contextPath}/js/c_smartmenus.js"></script>
		<script type="text/javascript" src="#{facesContext.externalContext.request.contextPath}/js/c_addon_popup_menus.js"></script>
					
							
	<script type="text/JavaScript">

		// Show and Hide Tabs.
		function t_show(id)
		{
		     if (document.getElementById(id).style.display == 'none')
		     {
		          document.getElementById(id).style.display = '';
		     }
		}
	
		function t_hide(id)
		{
			document.getElementById(id).style.display = 'none';
		}
	
	</script>
	</ui:define>  			

	<ui:param name="homeSelected" value="current" />

	<ui:define name="content">
	
		<h:form id="setupGroup">
			<h:inputHidden value="#{groupLevelBean.ping}" />
		</h:form>
	
		<ul id="grid_nav">
			<li class="l grid_icon"><h:graphicImage value="/images/ico_line.png" /></li>
			<li class="l grid_title">Overview</li>
			<li class="l divider"><img src="/images/grid_nav_divider.png" /></li>
			<li class="l"></li>
			<li class="r grid_icon"><h:graphicImage value="/images/ico_help.png" /></li>
			<li class="r divider"><img src="/images/grid_nav_divider.png" /></li>
		</ul>

        <table width="820" border="0" cellspacing="0" cellpadding="0" align="center" id="mpg_full_screen" style="margin-top: 10px; display: none;">
			<tr>
			  <td valign="top">
    			  <table width="130" border="0" cellpadding="0" cellspacing="0"  style="margin-top: 40px;">
                    <tr>
                      <td valign="top" class="ls_tab_off"><a href="#" class="ls_tab_line" onclick="t_hide('mpg_full_screen');t_hide('overall_full_screen');t_show('trend_full_screen');return true;">Trend</a></td>
                    </tr>
                    <tr>
                      <td valign="top" class="ls_tab_off"><a href="#" class="ls_tab_overall" onclick="t_hide('mpg_full_screen');t_hide('trend_full_screen');t_show('overall_full_screen');return true;">Overall Score </a></td>
                    </tr>
                    <tr>
                      <td valign="top" class="ls_tab_on"><a href="#" class="ls_tab_gas" onclick="t_hide('trend_full_screen');t_hide('overall_full_screen');t_show('mpg_full_screen');return true;">Miles Per Gallon</a></td>
                    </tr>
                </table>
			  </td>
			<td>
			
			<!-- START PANEL -->
			<div>
    			<ui:include src="/includes/mpgChart.xhtml">	
    				<ui:param name="reRenderList" value="mpgForm,mpgDataElement,mpgPanel"/>
    				<ui:param name="title" value="#{messages.mpg_title}"/>	
                    <ui:param name="ajaxForm" value="mpgForm" />
                    <ui:param name="ajaxStatusID" value="mpg_status" /> 
            		<ui:param name="barDef" value="#{mpgBean.barDef}"/>  
            		<ui:param name="duration" value="#{mpgBean.duration}" />   
              		<ui:param name="thirtyDaysOn" value="#{mpgBean.styleClass30Days}"/>
    				<ui:param name="threeMonthsOn" value="#{mpgBean.styleClass3Months}"/>
    				<ui:param name="sixMonthsOn" value="#{mpgBean.styleClass6Months}"/>
    				<ui:param name="twelveMonthsOn" value="#{mpgBean.styleClass12Months}"/>   
                    <ui:param name="xyheight" value="600"/>
                    <ui:param name="xywidth" value="800"/>  
                    <ui:param name="flyNavRule" value="go_home" />
                    <ui:param name="inFlyOut" value="true" />
    			</ui:include>
			</div>
		    <!-- END PANEL -->
		</td>

		</tr>
		</table>
        
		<table width="820" border="0" cellspacing="0" cellpadding="0" align="center" id="trend_full_screen" style="margin-top: 10px;  display: none;">
			<tr>
			  <td valign="top">
			  <table width="130" border="0" cellpadding="0" cellspacing="0"  style="margin-top: 40px;">
            <tr>
              <td valign="top" class="ls_tab_on"><a href="#" class="ls_tab_line" onclick="t_hide('mpg_full_screen');t_hide('overall_full_screen');t_show('trend_full_screen');return true;">Trend</a></td>
            </tr>
            <tr>
              <td valign="top" class="ls_tab_off"><a href="#" class="ls_tab_overall" onclick="t_hide('mpg_full_screen');t_hide('trend_full_screen');t_show('overall_full_screen');return true;">Overall Score </a></td>
            </tr>
            <tr>
              <td valign="top" class="ls_tab_off"><a href="#" class="ls_tab_gas" onclick="t_hide('trend_full_screen');t_hide('overall_full_screen');t_show('mpg_full_screen');return true;">Miles Per Gallon</a></td>
            </tr>
        </table>
			  </td>
			<td>
			
			<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">

					<div class="panel_title">
						<span class="line">Trend</span>
							<ui:include src="/includes/dateLinksWithFlyOut.xhtml">
								<ui:param name="ajaxForm" value="trendDateLinks"/>
								<ui:param name="ajaxStatusID" value="trendStatus"/>
								<ui:param name="reRenderList" value="xypanel,trendTable"/>			
								<ui:param name="thirtyDaysOn" value="#{navigationBean.styleClass30Days}"/>
								<ui:param name="threeMonthsOn" value="#{navigationBean.styleClass3Months}"/>
								<ui:param name="sixMonthsOn" value="#{navigationBean.styleClass6Months}"/>
								<ui:param name="twelveMonthsOn" value="#{navigationBean.styleClass12Months}"/>
		            			<ui:param name="duration" value="#{navigationBean.duration}" />
		            			<ui:param name="flyNavRule" value="go_home" />
		            			<ui:param name="flyOutImage" value="ico_minimize.png" />
		            			<ui:param name="reportType" value="TREND" />
							</ui:include>	
                    </div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					  	<!-- Start xy graph --> 
				<rich:panel id="xypanel" 
					style="height:300;width:445">
					<h:inputHidden value="#{trendBean.lineDef}" 
						id="hiddenField12" />

					<div id="chartdiv2" align="center"></div>
					<script type="text/javascript">
						var targetElement = document.getElementById("hiddenField12");
							
						var chart = new FusionCharts("#{facesContext.externalContext.request.contextPath}/fusioncharts/MSLine.swf", "ChartId", "800", "600", "0", "0");						   						   		
						chart.setDataXML(targetElement.value);
					   			   
						chart.render("chartdiv2");
					</script>
				</rich:panel> 
				<!-- End xy graph -->

				<div class="spacer"></div>			
				
				
				
				
				<div class="datagrid">
				<h:form id="trendTable">	
			
						<rich:dataTable value="#{trendBean.scoreableEntities}" id="items"
										var="item" styleClass="datagrid"
										rowClasses="trendTableOdd,trendTableEven" 
										cellspacing="1" width="100%">

							<!-- Data -->
							<rich:column width="20">
								<f:facet name="header">
									<h:outputText value=" " />
								</f:facet>
								<rich:spacer width="17" height="17"
									style="background-color:#{item.colorKey};border-style:solid;border-width:1px;border-color:#000000"></rich:spacer>
							</rich:column>

							<rich:column sortBy="#{item.se.identifier}">
								<f:facet name="header">
									<h:outputText value="Region" />
								</f:facet>
								<h:outputLink value="#{item.goTo}">
									<h:outputText value="#{item.se.identifier}" />
								</h:outputLink>
							</rich:column>

							<rich:column width="73" sortBy="#{item.se.score}">
								<f:facet name="header">
									<h:outputText value="Score" />
								</f:facet>
								<iwi:scoreBox style="#{item.style}" score="#{item.se.score}"/>
							</rich:column>

						</rich:dataTable>
					</h:form> 
				
				<rich:panel style="border: 1px solid #ccc; height: 24px; width: 100%;">	
					<div style="text-align: right;">													
						<h:outputText id="totalString" value="Showing #{trendBean.maxCount} records."/>
						<rich:spacer width="10"/>
					</div>									
				</rich:panel>
					
				<!-- End Trend table -->

				<!-- END PANEL -->
						
						</div>
						
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
		</td>

		</tr>
		</table>        
		
		<table width="820" border="0" cellspacing="0" cellpadding="0" align="center" id="overall_full_screen" style="margin-top: 10px; display: none;">
			<tr>
			  <td valign="top">
			  <table width="130" border="0" cellpadding="0" cellspacing="0"  style="margin-top: 40px;">
            <tr>
              <td valign="top" class="ls_tab_off"><a href="#" class="ls_tab_line" onclick="t_hide('mpg_full_screen');t_hide('overall_full_screen');t_show('trend_full_screen');return true;">Trend</a></td>
            </tr>
            <tr>
              <td valign="top" class="ls_tab_on"><a href="#" class="ls_tab_overall" onclick="t_hide('mpg_full_screen');t_hide('trend_full_screen');t_show('overall_full_screen');return true;">Overall Score </a></td>
            </tr>
            <tr>
              <td valign="top" class="ls_tab_off"><a href="#" class="ls_tab_gas" onclick="t_hide('trend_full_screen');t_hide('overall_full_screen');t_show('mpg_full_screen');return true;">Miles Per Gallon</a></td>

            </tr>
          </table>
			  </td>
			<td>
			
			<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="overall">Overall Score </span>
						<ui:include src="/includes/dateLinksWithFlyOut.xhtml">
							<ui:param name="ajaxForm" value="dateLinksFormForm"/>
							<ui:param name="ajaxStatusID" value="overall_status" /> 
							<ui:param name="reRenderList" value="overallPanel"/>			
							<ui:param name="thirtyDaysOn" value="#{breakdownBean.styleClass30Days}"/>
							<ui:param name="threeMonthsOn" value="#{breakdownBean.styleClass3Months}"/>
							<ui:param name="sixMonthsOn" value="#{breakdownBean.styleClass6Months}"/>
							<ui:param name="twelveMonthsOn" value="#{breakdownBean.styleClass12Months}"/>
	            			<ui:param name="duration" value="#{breakdownBean.duration}" />
	            			<ui:param name="flyNavRule" value="go_home" />
	            			<ui:param name="flyOutImage" value="ico_minimize.png" />
	            			<ui:param name="popupMenuID" value="PopupMenuOverall" />
	            			<ui:param name="reportType" value="OVERALL_SCORE" />
						</ui:include>	
                    </div>
				</div>
					<div class="panel_w">
					  <rich:panel bodyClass="panel_content" id="overallPanel">
					  
					  <table width="800" height="" border="1" align="center" cellpadding="0" cellspacing="0">
                            <tr>
                              <td colspan="3" valign="top" style="border-bottom: 1px solid #e1e1e1;">
						 		<table width="455" height="100" border="1" cellspacing="0" cellpadding="0" align="center">
					            	<tr>
					                	<td colspan="2" align="right" valign="top">&#160;</td>
					                </tr>
					                <tr>
					                    <td align="center" valign="top" width="120">
					    					<ui:include src="/includes/overallScoreBox.xhtml">	
												<ui:param name="scoreStyle" value="#{breakdownBean.overallScoreStyle}"/>									
				        	  					<ui:param name="score" value="#{breakdownBean.overallScore}"/>             						
				    						</ui:include>    							
										</td>
											
					                    <td rowspan="2" width="">
					                    	<rich:panel id="overall_pie" align="center"></rich:panel>
								  			<h:inputHidden value="#{breakdownBean.overallPieDef}" id="hiddenField1"/>
											<script type="text/javascript">
												var targetElement1 = document.getElementById("hiddenField1");
												var pie1 = new FusionCharts("#{facesContext.externalContext.request.contextPath}/fusioncharts/Pie2D.swf", "ChartId", "450", "450", "0", "0");										
												pie1.setDataXML(targetElement1.value);									   	   
												pie1.render("overall_pie");
											</script>
					                    </td>
					                 </tr>
					                 <tr>
					                 	
					                    <td align="center" valign="top" width="120">
											<ui:include src="/includes/scoreBoxLegend.xhtml"/>
					                    </td>
					                 </tr>
								</table>
                              </td>
                            </tr>
                            <tr>

                              <td width="225" valign="top" style="border-right: 1px solid #e1e1e1;">
                              			<div class="piegrid_label"><a href="#" class="ls_tab_drivestyle">Driving Style</a></div>
                                     	<rich:panel id="style_pie" align="center"></rich:panel>
								  			<h:inputHidden value="#{breakdownBean.stylePieDef}" id="hiddenField2"/>
											<script type="text/javascript">
												var targetElement2 = document.getElementById("hiddenField2");
												var pie2 = new FusionCharts("#{facesContext.externalContext.request.contextPath}/fusioncharts/Pie2D.swf", "ChartId", "220", "180", "0", "0");										
												pie2.setDataXML(targetElement2.value);									   	   
												pie2.render("style_pie");
											</script>
                              </td>
                              <td width="225" valign="top" style="border-right: 1px solid #e1e1e1;">
                             			<div class="piegrid_label"><a href="#" class="ls_tab_seatbelt">Seat Belt</a></div>
										<rich:panel id="seatBelt_pie" align="center"></rich:panel>
								  			<h:inputHidden value="#{breakdownBean.seatBeltPieDef}" id="hiddenField3"/>
											<script type="text/javascript">
												var targetElement3 = document.getElementById("hiddenField3");
												var pie3 = new FusionCharts("#{facesContext.externalContext.request.contextPath}/fusioncharts/Pie2D.swf", "ChartId", "220", "180", "0", "0");										
												pie3.setDataXML(targetElement3.value);									   	   
												pie3.render("seatBelt_pie");
											</script>
                              </td>
                              <td width="225" valign="top" style="border-right: 1px solid #e1e1e1;">
                              <div class="piegrid_label"><a href="#" class="ls_tab_speed">Speed</a></div>
                                     <rich:panel id="speed_pie" align="center"></rich:panel>
								  			<h:inputHidden value="#{breakdownBean.speedPieDef}" id="hiddenField4"/>
											<script type="text/javascript">
												var targetElement4 = document.getElementById("hiddenField4");
												var pie4 = new FusionCharts("#{facesContext.externalContext.request.contextPath}/fusioncharts/Pie2D.swf", "ChartId", "220", "180", "0", "0");										
												pie4.setDataXML(targetElement4.value);									   	   
												pie4.render("speed_pie");
											</script>

                              </td>
                            </tr>
                          </table>
					  
					  </rich:panel>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>

		<!-- END PANEL -->
		</td>
		</tr>
	</table>

	<script type="text/JavaScript">
	
		//Start page with the following tab.
		t_show('#{flyOutBean.selectedTab}');
	
		// The four tabs on this fly-out are the following:
		//
		// overall_full_screen
		// mpg_full_screen
		// trend_full_screen

	
		
	</script>

</ui:define>

</ui:composition>

<ui:composition template="/layout/layout.xhtml" 
			xmlns="http://www.w3.org/1999/xhtml" 
			xmlns:ui="http://java.sun.com/jsf/facelets"
  			xmlns:h="http://java.sun.com/jsf/html" 
            xmlns:rich="http://richfaces.org/rich"
            xmlns:a4j="http://richfaces.org/a4j"  			
  			xmlns:f="http://java.sun.com/jsf/core">
			

	<ui:param name="reportsSelected" value="current" />
	<ui:param name="vehiclesSelected" value="current" />
	<ui:param name="helpFile" value="Vehicles.htm" />
    <ui:param name="ajaxPanels" value="outerVehicleReport" />

	<ui:define name="subnavigation">
		<ui:include src="/includes/reports/subNavigation.xhtml" />
	</ui:define>
	
	
	<ui:define name="content">
		
		
			<table width="940" height="430" border="0" cellspacing="0" cellpadding="0" align="center" style="margin: 0 auto 0 auto;">
				<tr>
					<td valign="top">
												
							<div class="">
								<div class="panel_nw">
									<div class="panel_title">
										<span class="vehicle">#{messages.reports_vehiclereporttitle}</span>
										<span class="panel_links"></span>
									</div>
								</div>
									<div class="panel_w">
									<div class="panel_content">		
									
									<a4j:form id="outerVehicleReport">
									
<!--										<h:inputHidden value="#{vehicleReportBean.secret}"/>									-->
											<ui:include src="/includes/redFlagsCount.xhtml" />																
																			
										<ul id="grid_nav" style="margin: 0;">            							
            								<li class="l">
              									<table border="0" cellspacing="0" cellpadding="4" id="grid_nav_search_box">
                									<tr>
                  										<td>
                  											<h:outputText value="#{messages.button_search}" />
                  										</td>
                  										<td>
                    										<h:inputText id="filterTable" value="#{searchCoordinationBean.searchFor}" class="text" size="25" onkeypress="if (event &amp;&amp; event.keyCode == 13) { document.getElementById('outerVehicleReport:searchButton').onclick(); return false; } return true;" />
                  										</td>
                									</tr>
              									</table>
            								</li>
            								<li class="l">
            									<a4j:commandButton id="searchButton" action="#{vehicleReportBean.search}" 
            										reRender="navigation:redirectSearch,headerRedCount,items,topScroller,bottomScroller,headerVehicles" styleClass="left">
            											<span class="search">
            												<h:outputText value="#{messages.button_search}" />
            											</span>
            									</a4j:commandButton>            								
            								</li>
            								<li class="l text">
            									<a4j:commandLink 
            										reRender="editColumnsForm:editColumnGrid"
            										action="#"
            									 	styleClass="ls_tab_edit_columns"
            										onclick="Richfaces.showModalPanel('editColumns');">            									
            										<h:outputText value="#{messages.button_editColumns}" />
            									</a4j:commandLink>            									
            								</li>  
            								<li class="r grid_icon">
            									<h:panelGroup id="vehicleReportToolImageId">
													<h:graphicImage value="/images/ico_tools.png"/>
												</h:panelGroup>
											</li>
											<li class="r divider"><img src="#{facesContext.externalContext.request.contextPath}/images/grid_nav_divider.png" />
											</li>
            								<li class="r text">
              									<h:outputFormat id="headerVehicles" value="#{messages.recordCountHeader}">
													<a4j:actionparam value="#{vehicleReportBean.start}"/>
													<a4j:actionparam value="#{vehicleReportBean.end}"/>
													<a4j:actionparam value="#{vehicleReportBean.maxCount}"/>
												</h:outputFormat> 
            								</li>          							
          								</ul>
          								
          						<rich:contextMenu event="onclick" attachTiming="onavailable"
									disableDefaultMenu="false" submitMode="server"
									attachTo="vehicleReportToolImageId">
									<rich:menuItem ajaxSingle="true" rendered="true"
													iconDisabled="/images/ico_email.gif" 
													icon="/images/ico_email.gif" 
													onclick="Richfaces.showModalPanel('vehicleReportEmailModal');return false;"
													value="#{messages.contextMenu_email_this_report}" id="emailMenuItem" submitMode="none">
									</rich:menuItem>
			
									<rich:menuItem ajaxSingle="true"
										iconDisabled="/images/ico_pdf.gif" icon="/images/ico_pdf.gif"
										value="Export To PDF"
										action="#{vehicleReportBean.exportReportToPdf}"
										id="export_menu_item">
									</rich:menuItem>
									<rich:menuItem ajaxSingle="true"
										iconDisabled="/images/ico_excel.png" icon="/images/ico_excel.png"
										value="Export To Excel"
										action="#{vehicleReportBean.exportReportToExcel}"
										id="exportExcelMEnuItem">
									</rich:menuItem>
								</rich:contextMenu>																																	
								
								<div class="datagrid">
								<ui:include src="/includes/vehiclesReport.xhtml">	
									<ui:param name="numRowsPerPg" value="#{vehicleReportBean.numRowsPerPg}"/>									
             						<ui:param name="vehicleData" value="#{vehicleReportBean.vehicleData}"/>             						
             						<ui:param name="vehicleColumns" value="#{vehicleReportBean.tableColumns}"/>
    							</ui:include>    		
    							</div>	   
    							</a4j:form> 										
								<ui:include src="/includes/editColumnsPopup.xhtml">
									<ui:param name="bean" value="#{vehicleReportBean}"/>	
									<ui:param name="reRender" value="outerVehicleReport:items" />
								</ui:include>    
								
								
								</div>
								</div>	
								 						
    					    	<div class="panel_sw">
									<div class="panel_statusbar"></div>
								</div>
							</div>
													
					</td>
				</tr>
			</table>
			
		<h:outputText id="vehicle_email_modalPanel">
			<ui:include src="/includes/emailReportPopup.xhtml">	
				<ui:param  name="id" value="vehicleReportEmailModal" />
				<ui:param  name="reportBean" value="#{vehicleReportBean}"/>
			</ui:include>
		</h:outputText>
				
	</ui:define>
	

</ui:composition>
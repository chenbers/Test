<ui:composition template="/layout/layout.xhtml" 
              xmlns="http://www.w3.org/1999/xhtml" 
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:rich="http://richfaces.org/rich"
              xmlns:a4j="http://richfaces.org/a4j"
              xmlns:f="http://java.sun.com/jsf/core"
              xmlns:security="http://pro.tiwi.com/jsf/security">

  <ui:param name="adminSelected" value="current" />

  <ui:define name="content">

    <table width="920" border="0" cellspacing="0" cellpadding="0" align="center" style="margin: 0 auto 0 auto;">
      <tr>
      <td valign="top" width="130">
        <ui:include src="/includes/adminSideNav.xhtml">
          <ui:param name="selectedAction" value="#{(personBean.add) ? 'go_adminAddPerson' : 'go_adminPeople'}" />
          <ui:param name="parentAction" value="go_adminPeople" />
        </ui:include>
      </td>
      <td valign="top">
          <!-- START PANEL -->

        <a4j:form id="edit-form">

          <div class="">
            <div class="panel_nw">
              <div class="panel_title">
                <span class="admin"><h:outputText value="#{personBean.add ? messages.adminHeader_addPerson : (personBean.batchEdit ? messages.adminHeader_editPeople : messages.adminHeader_editPerson)}" /></span>
                <span class="panel_links"></span>
              </div>
            </div>
            <div class="panel_w">
              <div class="panel_content">

                <ul id="grid_nav" style="margin: 0;">
                  <li class="r">
                    <h:commandButton action="#{personBean.save}" styleClass="left"><span class="save"><h:outputText value="#{messages.button_save}" /></span></h:commandButton>
                    <h:outputText value=" " /><h:commandButton action="#{personBean.cancelEdit}" immediate="true" styleClass="left"><span class="cancel"><h:outputText value="#{messages.button_cancel}" /></span></h:commandButton>
                  </li>
                </ul>

                <rich:messages globalOnly="true" errorClass="error" fatalClass="error" warnClass="warning" infoClass="info" styleClass="msg" />

                <div class="spacer"></div>

                <table width="790" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td width="390" valign="top">

                      <div class="add_section_title"><h:outputText value="#{messages.editPerson_personalInformation}" /></div>

                      <table width="370" border="0" cellspacing="2" cellpadding="4" align="center">
                        <ui:fragment rendered="#{not personBean.batchEdit}">
                        <tr>
                          <td width="100" valign="top">
                            <h:outputText value="#{messages.editPerson_empid}" />
                            <span class="required">*</span>
                          </td>
                          <td>
                            <rich:message for="empid" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.empid}" id="empid" onchange="checkMultiple(this)" styleClass="text" size="30"
                              maxlength="30" required="#{(not personBean.batchEdit) or personBean.updateField['empid']}" requiredMessage="#{messages.required}" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:outputText value="#{messages.editPerson_first}" />
                            <span class="required">*</span>
                          </td>
                          <td>
                            <rich:message for="first" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.first}" id="first" onchange="checkMultiple(this)" styleClass="text" size="30"
                              maxlength="30" required="#{(not personBean.batchEdit) or personBean.updateField['first']}" requiredMessage="#{messages.required}" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top"><h:outputText value="#{messages.editPerson_middle}" /></td>
                          <td>
                            <h:inputText value="#{personBean.item.middle}" id="middle" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="30" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:outputText value="#{messages.editPerson_last}" />
                            <span class="required">*</span>
                          </td>
                          <td>
                            <rich:message for="last" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.last}" id="last" onchange="checkMultiple(this)" styleClass="text" size="30"
                              maxlength="30" required="#{(not personBean.batchEdit) or personBean.updateField['last']}" requiredMessage="#{messages.required}" />
                          </td>
                        </tr>
                        <tr>
                        <td width="100" valign="top"><h:outputText value="#{messages.editPerson_suffix}" /></td>
                          <td>
                            <h:selectOneMenu value="#{personBean.item.suffix}" id="suffix" onchange="checkMultiple(this)">
                              <f:selectItem itemLabel="" />
                              <f:selectItem itemValue="#{messages.editPerson_suffixJr}" />
                              <f:selectItem itemValue="#{messages.editPerson_suffixSr}" />
                              <f:selectItem itemValue="#{messages.editPerson_suffixIII}" />
                            </h:selectOneMenu>
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top"><h:outputText value="#{messages.editPerson_dob}" /></td>
                          <td>
                            <rich:message for="dob" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <rich:calendar value="#{personBean.item.dob}" id="dob" todayControlMode="hidden" enableManualInput="true" converterMessage="#{messages.editPerson_dateFormat}" />
                          </td>
                        </tr>
                        </ui:fragment>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_gender" value="#{personBean.updateField['gender']}" />
                            <h:outputText value="#{messages.editPerson_gender}" />
                          </td>
                          <td>
                            <h:selectOneMenu value="#{personBean.item.gender}" id="gender" onchange="checkMultiple(this)">
                              <f:selectItem itemLabel="" />
                              <f:selectItems value="#{personBean.genders}" />
                            </h:selectOneMenu>
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_height" value="#{personBean.updateField['height']}" />
                            <h:outputText value="#{messages.editPerson_height}" />
                          </td>
                          <td>
                            <h:selectOneMenu value="#{personBean.item.height}" id="height" onchange="checkMultiple(this)">
                              <f:selectItem itemLabel="" />
                              <f:selectItems value="#{personBean.heights}" />
                            </h:selectOneMenu>
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_weight" value="#{personBean.updateField['weight']}" />
                            <h:outputText value="#{messages.editPerson_weight}" />
                          </td>
                          <td>
                            <rich:message for="weight" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <rich:inputNumberSpinner value="#{personBean.item.weight}" id="weight" onchange="checkMultiple('weight')" minValue="50" maxValue="400" step="1" />
                          </td>
                        </tr>
                      </table>

                      <div class="spacer"></div>

                      <div class="add_section_title"><h:outputText value="#{messages.editPerson_contactInformation}" /></div>

                      <table width="370" border="0" cellspacing="2" cellpadding="4" align="center">
                        <ui:fragment rendered="#{not personBean.batchEdit}">
                        <tr>
                          <td width="100" valign="top"><h:outputText value="#{messages.editPerson_address_addr1}" /></td>
                          <td>
                            <rich:message for="address_addr1" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.address.addr1}" id="address_addr1" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="126" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top"><h:outputText value="#{messages.editPerson_address_addr2}" /></td>
                          <td>
                            <h:inputText value="#{personBean.item.address.addr2}" id="address_addr2" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="126" />
                          </td>
                        </tr>
                        </ui:fragment>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_address_city" value="#{personBean.updateField['address.city']}" />
                            <h:outputText value="#{messages.editPerson_address_city}" />
                          </td>
                          <td>
                            <rich:message for="address_city" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.address.city}" id="address_city" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="30" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_address_state" value="#{personBean.updateField['address.state']}" />
                            <h:outputText value="#{messages.editPerson_address_state}" />
                          </td>
                          <td>
                            <rich:message for="address_state" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:selectOneMenu value="#{personBean.item.address.state}" id="address_state" onchange="checkMultiple(this)">
                              <f:selectItem itemLabel="" />
                              <f:converter  converterId="StateConverter"/>
                              <f:selectItems value="#{personBean.states}" />
                            </h:selectOneMenu>
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_address_zip" value="#{personBean.updateField['address.zip']}" />
                            <h:outputText value="#{messages.editPerson_address_zip}" />
                          </td>
                          <td>
                            <rich:message for="address_zip" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.address.zip}" id="address_zip" onchange="checkMultiple(this)" styleClass="text" size="10" maxlength="10" validatorMessage="#{messages.editPerson_zipFormat}">
                              <f:validator validatorId="com.inthinc.pro.validators.RegexValidator" />
                              <f:attribute name="regex" value="\d{5}(-\d{4})?" />
                            </h:inputText>
                          </td>
                        </tr>
                        <ui:fragment rendered="#{not personBean.batchEdit}">
                        <tr>
                          <td width="100" valign="top"><h:outputText value="#{messages.editPerson_homePhone}" /></td>
                          <td>
                            <rich:message for="homePhone" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.homePhone}" id="homePhone" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="22" validatorMessage="#{messages.editPerson_phoneFormat}">
                              <f:validator validatorId="com.inthinc.pro.validators.RegexValidator" />
                              <f:attribute name="regex" value="\D?\d{3}\D*\d{3}\D?\d{4}" />
                            </h:inputText>
                          </td>
                        </tr>
                        </ui:fragment>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_workPhone" value="#{personBean.updateField['workPhone']}" />
                            <h:outputText value="#{messages.editPerson_workPhone}" />
                          </td>
                          <td>
                            <rich:message for="workPhone" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.workPhone}" id="workPhone" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="22" validatorMessage="#{messages.editPerson_phoneFormat}">
                              <f:validator validatorId="com.inthinc.pro.validators.RegexValidator" />
                              <f:attribute name="regex" value="\D?\d{3}\D*\d{3}\D?\d{4}" />
                            </h:inputText>
                          </td>
                        </tr>
                        <ui:fragment rendered="#{not personBean.batchEdit}">
                        <tr>
                          <td width="100" valign="top">
                            <h:outputText value="#{messages.editPerson_email}" />
                            <a4j:outputPanel id="emailRequired">
                              <h:outputText rendered="#{personBean.item.userSelected}" styleClass="required" value=" *" />
                            </a4j:outputPanel>
                          </td>
                          <td>
                            <rich:message for="email" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.email}" id="email" onchange="checkMultiple(this)" styleClass="text" size="30"
                              maxlength="62" required="#{personBean.item.userSelected}" requiredMessage="#{messages.required}" validatorMessage="#{messages.editPerson_emailFormat}">
                              <f:validator validatorId="com.inthinc.pro.validators.EmailValidator" />
                            </h:inputText>
                          </td>
                        </tr>
                        </ui:fragment>
                      </table>

                    </td>
                    <td width="10"><h:graphicImage value="/images/x.gif" width="10" /></td>
                    <td width="390" valign="top">

                      <div class="add_section_title"><h:outputText value="#{messages.editPerson_employeeInformation}" /></div>

                      <table width="370" border="0" cellspacing="2" cellpadding="4" align="center">
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_reportsTo" value="#{personBean.updateField['reportsTo']}" />
                            <h:outputText value="#{messages.editPerson_reportsTo}" />
                          </td>
                          <td>
                            <h:inputText value="#{personBean.item.reportsTo}" id="reportsTo" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="60" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_title" value="#{personBean.updateField['title']}" />
                            <h:outputText value="#{messages.editPerson_title}" />
                          </td>
                          <td>
                            <h:inputText value="#{personBean.item.title}" id="title" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="30" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_timeZone" value="#{personBean.updateField['timeZone']}" />
                            <h:outputText value="#{messages.editPerson_timeZone}" />
                            <h:outputText rendered="#{not personBean.batchEdit}" styleClass="required" value=" *" />
                          </td>
                          <td>
                            <rich:message for="timeZone" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:selectOneMenu value="#{personBean.item.timeZone}" id="timeZone" onchange="checkMultiple(this)" style="width:200px" required="#{(not personBean.batchEdit) or personBean.updateField['timeZone']}" requiredMessage="#{messages.required}">
                              <f:selectItem itemLabel="" />
                              <f:converter  converterId="TimeZoneConverter" />
                              <f:selectItems value="#{personBean.timeZones}" />
                            </h:selectOneMenu>
                          </td>
                        </tr>
                      </table>

                      <div class="spacer"></div>

                      <rich:message for="isUser" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                      <div class="add_section_title">
                        <h:selectBooleanCheckbox rendered="#{not personBean.batchEdit}" id="isUser" value="#{personBean.item.userSelected}" onclick="showSection('userTable', this.checked)">
                          <a4j:support event="onchange" ajaxSingle="true" reRender="emailRequired,email,isUser" limitToList="true" />
                        </h:selectBooleanCheckbox>
                        <h:outputText value="#{messages.editPerson_userInformation}" />
                      </div>

                      <table id="userTable" width="370" border="0" cellspacing="2" cellpadding="4" align="center">
                        <ui:fragment rendered="#{not personBean.batchEdit}">
                        <tr>
                          <td width="100" valign="top">
                            <h:outputText value="#{messages.editPerson_user_username}" />
                            <span class="required">*</span>
                          </td>
                          <td>
                            <rich:message for="user_username" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.user.username}" id="user_username" onchange="checkMultiple(this)" styleClass="text" size="30"
                              maxlength="30" required="#{personBean.item.userSelected and ((not personBean.batchEdit) or personBean.updateField['user.username'])}" requiredMessage="#{messages.required}" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:outputText value="#{messages.editPerson_user_password}" />
                            <h:outputText rendered="#{empty personBean.item.user.password}" styleClass="required" value=" *" />
                          </td>
                          <td>
                            <rich:message for="user_password" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputSecret value="#{personBean.item.password}" id="user_password" redisplay="true" onchange="checkMultiple(this)" styleClass="text" size="30"
                              maxlength="30" required="#{personBean.item.userSelected and empty personBean.item.user.password}" requiredMessage="#{messages.required}" validatorMessage="#{messages.editPerson_passwordFormat}">
                              <f:validator validatorId="com.inthinc.pro.validators.RegexValidator" />
                              <f:attribute name="regex" value="\w{6,12}" />
                            </h:inputSecret>
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:outputText value="#{messages.editPerson_confirmPassword}" />
                            <h:outputText rendered="#{empty personBean.item.user.password}" styleClass="required" value=" *" />
                          </td>
                          <td>
                            <rich:message for="confirmPassword" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputSecret value="#{personBean.item.confirmPassword}" id="confirmPassword" redisplay="true" onchange="checkMultiple(this)" styleClass="text" size="30"
                              maxlength="30" required="#{personBean.item.userSelected and empty personBean.item.user.password}" requiredMessage="#{messages.required}" />
                          </td>
                        </tr>
                        </ui:fragment>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_user_groupID" value="#{personBean.updateField['user.groupID']}" />
                            <h:outputText value="#{messages.editPerson_user_group}" />
                            <h:outputText rendered="#{not personBean.batchEdit}" styleClass="required" value=" *" />
                          </td>
                          <td>
                            <rich:message for="user_groupID" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:selectOneMenu value="#{personBean.item.user.groupID}" id="user_groupID" required="#{personBean.item.userSelected and ((not personBean.batchEdit) or personBean.updateField['user.groupID'])}" requiredMessage="#{messages.required}">
                              <f:selectItem itemLabel="" />
                              <f:selectItems value="#{personBean.groups}" />
                            </h:selectOneMenu>
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_user_role" value="#{personBean.updateField['user.role']}" />
                            <h:outputText value="#{messages.editPerson_user_role}" />
                            <h:outputText rendered="#{not personBean.batchEdit}" styleClass="required" value=" *" />
                          </td>
                          <td>
                            <h:selectOneMenu value="#{personBean.item.user.role}" id="user_role" onchange="checkMultiple(this)">
                              <f:converter  converterId="RoleConverter"/>
                              <f:selectItems value="#{personBean.roles}" />
                            </h:selectOneMenu>
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_user_status" value="#{personBean.updateField['user.status']}" />
                            <h:outputText value="#{messages.editPerson_user_status}" />
                            <h:outputText rendered="#{not personBean.batchEdit}" styleClass="required" value=" *" />
                          </td>
                          <td>
                            <h:selectOneMenu value="#{personBean.item.user.status}" id="user_status" onchange="checkMultiple(this)">
                              <f:selectItems value="#{personBean.statuses}"/>
                            </h:selectOneMenu>
                          </td>
                        </tr>
                      </table>

                      <div class="spacer"></div>

                      <div class="add_section_title">
                        <h:selectBooleanCheckbox rendered="#{not personBean.batchEdit}" id="isDriver" value="#{personBean.item.driverSelected}" onclick="showSection('driverTable', this.checked)">
                          <a4j:support event="onchange" ajaxSingle="true" reRender="isDriver" limitToList="true" />
                        </h:selectBooleanCheckbox>
                        <h:outputText value="#{messages.editPerson_driverInformation}" />
                      </div>

                      <table id="driverTable" width="370" border="0" cellspacing="2" cellpadding="4" align="center">
                        <ui:fragment rendered="#{not personBean.batchEdit}">
                        <tr>
                          <td width="100" valign="top"><h:outputText value="#{messages.editPerson_driver_license}" /></td>
                          <td>
                            <rich:message for="driver_license" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.driver.license}" id="driver_license" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="10" />
                          </td>
                        </tr>
                        </ui:fragment>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_driver_licenseClass" value="#{personBean.updateField['driver.licenseClass']}" />
                            <h:outputText value="#{messages.editPerson_driver_licenseClass}" />
                          </td>
                          <td>
                            <h:selectOneMenu value="#{personBean.item.driver.licenseClass}" id="driver_licenseClass" onchange="checkMultiple(this)">
                              <f:selectItem itemLabel="" />
                              <f:selectItems value="#{personBean.licenseClasses}" />
                            </h:selectOneMenu>
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_driver_state" value="#{personBean.updateField['driver.state']}" />
                            <h:outputText value="#{messages.editPerson_driver_state}" />
                          </td>
                          <td>
                            <rich:message for="driver_state" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:selectOneMenu value="#{personBean.item.driver.state}" id="driver_state" onchange="checkMultiple(this)">
					          <f:selectItem itemLabel="" />
					          <f:converter  converterId="StateConverter"/>
                              <f:selectItems value="#{personBean.states}" />
                            </h:selectOneMenu>
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_driver_expiration" value="#{personBean.updateField['driver.expiration']}" />
                            <h:outputText value="#{messages.editPerson_driver_expiration}" />
                          </td>
                          <td>
                            <rich:message for="driver_expiration" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <rich:calendar value="#{personBean.item.driver.expiration}" id="driver_expiration" onchanged="checkMultiple('driver_expiration')" enableManualInput="true" converterMessage="#{messages.editPerson_dateFormat}" />
                          </td>
                        </tr>
                        <ui:fragment rendered="#{not personBean.batchEdit}">
                        <tr>
                          <td width="100" valign="top"><h:outputText value="#{messages.editPerson_driver_RFID}" /></td>
                          <td>
                            <rich:message for="driver_RFID" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText value="#{personBean.item.driver.RFID}" id="driver_RFID" onchange="checkMultiple(this)" styleClass="text" size="30"
                              maxlength="16" required="false" converterMessage="#{messages.editPerson_RFIDFormat}" validatorMessage="#{messages.editPerson_RFIDFormat}">
                              <f:validateLongRange minimum="-2305843009213693952" maximum="-2233785415175766017" />
                              <f:converter converterId="HexConverter" />
                            </h:inputText>
                          </td>
                        </tr>
                        </ui:fragment>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_driver_certifications" value="#{personBean.updateField['driver.certifications']}" />
                            <h:outputText value="#{messages.editPerson_driver_certifications}" />
                          </td>
                          <td>
                            <h:inputText value="#{personBean.item.driver.certifications}" id="driver_certifications" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="160" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_driver_dot" value="#{personBean.updateField['driver.dot']}" />
                            <h:outputText value="#{messages.editPerson_driver_dot}" />
                          </td>
                          <td>
                            <h:inputText value="#{personBean.item.driver.dot}" id="driver_dot" onchange="checkMultiple(this)" styleClass="text" size="30" maxlength="160" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_driver_groupID" value="#{personBean.updateField['driver.groupID']}" />
                            <h:outputText value="#{messages.editPerson_driver_team}" />
                            <h:outputText rendered="#{not personBean.batchEdit}" styleClass="required" value=" *" />
                          </td>
                          <td>
                            <rich:message for="driver_groupID" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:selectOneMenu value="#{personBean.item.driver.groupID}" id="driver_groupID" required="#{personBean.item.driverSelected and ((not personBean.batchEdit) or personBean.updateField['driver.groupID'])}" requiredMessage="#{messages.required}">
                              <f:selectItem itemLabel="" />
                              <f:selectItems value="#{personBean.teams}" />
                            </h:selectOneMenu>
                          </td>
                        </tr>
                        <tr>
                          <td width="100" valign="top">
                            <h:selectBooleanCheckbox rendered="#{personBean.batchEdit}" id="update_driver_status" value="#{personBean.updateField['driver.status']}" />
                            <h:outputText value="#{messages.editPerson_driver_status}" />
                            <h:outputText rendered="#{not personBean.batchEdit}" styleClass="required" value=" *" />
                          </td>
                          <td>
                            <h:selectOneMenu value="#{personBean.item.driver.status}" id="driver_status" onchange="checkMultiple(this)">
                              <f:selectItems value="#{personBean.statuses}"/>
                            </h:selectOneMenu>
                          </td>
                        </tr>
                      </table>

                    </td>
                  </tr>
                </table>

                <div class="required-key"><h:outputText value="#{messages.requiredKey}" /></div>

                <div class="spacer"></div>

                <ul id="grid_nav" style="margin: 0;">
                  <li class="r">
                    <h:commandButton action="#{personBean.save}" styleClass="left"><span class="save"><h:outputText value="#{messages.button_save}" /></span></h:commandButton>
                    <h:outputText value=" " /><h:commandButton action="#{personBean.cancelEdit}" immediate="true" styleClass="left"><span class="cancel"><h:outputText value="#{messages.button_cancel}" /></span></h:commandButton>
                  </li>
                </ul>

              </div>
            </div>
            <div class="panel_sw">
              <div class="panel_statusbar"></div>
            </div>
          </div>

          </a4j:form>
          <!-- END PANEL -->
        </td>

      </tr>
    </table>

    <script type="text/javascript">
  var formElements = ["text", "checkbox", "radio", "select-one", "select-multiple", "textarea"];

  function bodyLoad()
  {
    var elements = document.getElementById("edit-form").elements;
    for (var i = 0; i &lt; elements.length; i++)
      for (var j = 0; j &lt; formElements.length; j++)
        if (elements[i].getAttribute("type") == formElements[j])
        {
          elements[i].focus();
          return;
        }
  }

  function checkMultiple(item)
  {
    var id;
    if (typeof(item) == "string")
      id = item;
    else
      id = item.id;

    var box;
    var index = id.indexOf(":");
    if (index > 0)
      box = document.getElementById("edit-form:update_" + id.substring(index + 1));
    else
      box = document.getElementById("edit-form:update_" + id);
    if (box)
      box.checked = true;
  }

  function showSection(id, show)
  {
    document.getElementById(id).style.display = show ? "" : "none";
  }

  var isUser = document.getElementById("edit-form:isUser");
  if (isUser)
  {
    showSection("userTable", isUser.checked);
    showSection("driverTable", document.getElementById("edit-form:isDriver").checked);
  }
    </script>

  </ui:define>

</ui:composition>

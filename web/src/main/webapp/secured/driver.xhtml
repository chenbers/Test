<ui:composition template="/layout/layout.xhtml" 
			xmlns="http://www.w3.org/1999/xhtml" 
			xmlns:ui="http://java.sun.com/jsf/facelets"
  			xmlns:h="http://java.sun.com/jsf/html" 
  			xmlns:rich="http://richfaces.org/rich"
  			xmlns:a4j="http://richfaces.org/a4j"
  			xmlns:f="http://java.sun.com/jsf/core"
  			xmlns:iwi="http://pro.tiwi.com/jsf">

	<ui:define name="scripts">
		<script src="/tiwipro/js/FusionCharts.js" type="text/javascript"></script>	
		<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAyQYKk4__l80DyIsqLPvvuxTRFLl8Tcq3arEgFHYFeOMvEMiJ8RQehhrYXPIDrf1muScWAd1MXrlVkQ" type="text/javascript"></script>	
	</ui:define>

	<ui:param name="homeSelected" value="current" />
	
	<ui:define name="subnavigation">
		<ui:include src="/includes/reports/subNavigation.xhtml" />
	</ui:define>
	
	<ui:define name="content">
<div id="wrapper">


<ul id="grid_nav">
	<li class="l grid_icon"><img src="images/ico_line.png" /></li>
	<li class="l grid_title">Driver Performance: <h:outputText> #{driverBean.driverName}</h:outputText></li>
	<li class="l divider"><img src="/images/grid_nav_divider.png" /></li>
	<li class="l">
	
		<ul id="breadcrumb">
			<li class="first"><a href="/">Home</a></li>
			<li><a href="drivers.html">Drivers</a></li>
			<li class="last"><h:outputText>#{driverBean.driverName}</h:outputText></li>
		</ul>
	</li>
</ul>

<table width="940" border="0" cellspacing="0" cellpadding="0" align="center" class="dash_table">
  <tr>
    <td colspan="3" valign="top">
		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="line">Overall Score </span>
						<a4j:form id="overall-form"> 
						<span class="panel_links"><h:outputText>Graph the last:&#160;</h:outputText> 
							       
  										<a4j:commandLink title="#{messages.miles500}" immediate="true"
            								styleClass="#{(driverBean.duration eq '500') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"
            								value="#{messages.miles500}">
            								<a4j:actionparam name="duration" assignTo="#{driverBean.duration}" value="500" />
          								</a4j:commandLink><h:outputText value=" "></h:outputText>
          								<a4j:commandLink title="#{messages.miles1000}" immediate="true"
            								styleClass="#{(driverBean.duration eq '1000') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"            								
            								value="#{messages.miles1000}">
            								<a4j:actionparam name="duration" assignTo="#{driverBean.duration}" value="1000" />
          								</a4j:commandLink><h:outputText value=" "></h:outputText>
          								<a4j:commandLink title="#{messages.miles10000}" immediate="true"
            								styleClass="#{(driverBean.duration eq '10000') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"
            								value="#{messages.miles10000}">
            								<a4j:actionparam name="duration" assignTo="#{driverBean.duration}" value="10000" />
          								</a4j:commandLink><h:outputText value=" "></h:outputText>
      							
								</span>
									</a4j:form>
						</div>
				</div>
				<div class="panel_w">
				  <rich:panel bodyClass="panel_content" id="overallPanel" border="0">
				  <table width="920" border="0" cellspacing="0" cellpadding="0" align="center" style="margin: 10px auto 0 auto;">
					  <tr>
						<td valign="top" width="600">
							<div id="overall_chart"></div>
							<h:inputHidden value="#{driverBean.overallScoreHistory}" id="hiddenField"/>
								<script type="text/javascript">
									var targetElement1 = document.getElementById("hiddenField");
									var chart = new FusionCharts("../fusioncharts/Area2D.swf", "ChartId", "650", "200", "0", "0");
									chart.setDataXML(targetElement1.value);		   
									chart.render("overall_chart");
								</script>
						</td>
						<td valign="top" align="right">
							<table width="220" border="0" cellspacing="0" cellpadding="0" class="scorebox" style="margin: 20px 20px 0 0;">
							  <tr>
								<td>
									<h4>Overall Score</h4>
									<div style="margin-top: 8px;"><a href="#" class="ls_tab_email">Email</a></div>
								</td>
								<td width="80" align="center">
									<ui:include src="../includes/scoreBox.xhtml">
								            <ui:param name="score" value="#{driverBean.overallScore}" />
								            <ui:param name="scoreStyle" value="#{driverBean.overallScoreStyle}" />
									</ui:include>
								</td>
							  </tr>
							</table>
						</td>
					  </tr>
					</table>
				  
				  </rich:panel>
				</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
	</td>
    </tr>
  <tr>
    <td colspan="3" valign="top"><img src="images/x.gif" width="10" height="10" /></td>
    </tr>
  <tr>
    <td width="465" valign="top">

		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="speed">Speed</span>
						<span class="panel_links"><a href="driverq_speed.html">view report</a></span>					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">                        
                          <tr>
                            <td width="373">
								<div id="speed_chart"></div>
								<h:inputHidden value="#{driverBean.speedScoreHistory}" id="hiddenField2"/>
								<script type="text/javascript">
									var targetElement2 = document.getElementById("hiddenField2");
									var chart = new FusionCharts("../fusioncharts/Area2D.swf", "ChartId", "380", "200", "0", "0");
									chart.setDataXML(targetElement2.value);			   
									chart.render("speed_chart");
								</script>
							</td>
                            <td width="80" align="center">
								                                    <ui:include src="../includes/scoreBox.xhtml">
								            <ui:param name="score" value="#{driverBean.speedScore}" />
								            <ui:param name="scoreStyle" value="#{driverBean.speedScoreStyle}" />
									</ui:include>
							</td>
                          </tr>
                        </table>
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="vehicle">Driving Style</span>
						<span class="panel_links"><a href="driverq_style.html">view report</a></span>
					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
                          <tr>
                            <td width="373">
                              <div id="style_chart"></div>
                             	<h:inputHidden value="#{driverBean.drivingScoreHistory}" id="hiddenField3"/>
								<script type="text/javascript">
									var targetElement3 = document.getElementById("hiddenField3");
									var chart = new FusionCharts("../fusioncharts/Area2D.swf", "ChartId", "380", "200", "0", "0");
									chart.setDataXML(targetElement3.value);			   
									chart.render("style_chart");
								</script>
                            </td>
                            <td width="80" align="center">
                                    <ui:include src="../includes/scoreBox.xhtml">
								            <ui:param name="score" value="#{driverBean.drivingScore}" />
								            <ui:param name="scoreStyle" value="#{driverBean.drivingScoreStyle}" />
									</ui:include>
                            </td>
                          </tr>
                        </table>
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="seatbelt">Seatbelt</span>
						<span class="panel_links"><a href="driverq_seatbelt.html">view report</a></span>					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
                          <tr>
                            <td width="373">
                              <div id="seatbelt_chart"></div>
                           		<h:inputHidden value="#{driverBean.seatBeltScoreHistory}" id="hiddenField4"/>
								<script type="text/javascript">
									var targetElement4 = document.getElementById("hiddenField4");
									var chart = new FusionCharts("../fusioncharts/Area2D.swf", "ChartId", "380", "200", "0", "0");
									chart.setDataXML(targetElement4.value);			   
									chart.render("seatbelt_chart");
								</script>
                            </td>
                            <td width="80" align="center">
                        	        <ui:include src="../includes/scoreBox.xhtml">
								            <ui:param name="score" value="#{driverBean.seatBeltScore}" />
								            <ui:param name="scoreStyle" value="#{driverBean.seatBeltScoreStyle}" />
									</ui:include>
                            </td>
                          </tr>
                        </table>
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
	</td>
	
    <td width="10"><img src="images/x.gif" width="10" /></td>
	
    <td width="465" valign="top">
		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="map">Last Trip</span>
						<span class="panel_links"><a href="trips.html">view all trips</a></span>
					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					  	<h:panelGroup styleClass="map-border" layout="block">
							<div id="map-canvas" style="width:458px;height:300px;border:0"></div>
					  	</h:panelGroup>
					    <script type="text/javascript">
      						if (GBrowserIsCompatible()) {
        						map = new GMap2(document.getElementById("map-canvas"));
        						map.addControl(new GLargeMapControl());
        						map.addControl(new GMapTypeControl());
        						map.addControl(new GOverviewMapControl()); 
								map.setCenter(new GLatLng(41.0,-116.0 ), 5);
								map.setMapType(G_MAP_TYPE);
      						}
    					</script>
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="coaching">Coaching Events </span>
						<span class="panel_links">_</span>					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					    <table width="450" border="0" align="center" cellpadding="0" cellspacing="0">
                          <tr>
                            <td>
                              <div id="coaching_chart"></div>
                            <h:inputHidden value="#{driverBean.coachingHistory}" id="hiddenField5"/>
								<script type="text/javascript">
									var targetElement5 = document.getElementById("hiddenField5");
									var chart = new FusionCharts("../fusioncharts/Area2D.swf", "ChartId", "380", "200", "0", "0");
									chart.setDataXML(targetElement5.value);			   
									chart.render("coaching_chart");
								</script>
                            </td>
                          </tr>
                        </table>
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
	</td>
  </tr>
</table>
</div>
</ui:define>

</ui:composition>

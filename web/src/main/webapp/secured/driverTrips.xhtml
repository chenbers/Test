<ui:composition template="/layout/layout.xhtml" 
				xmlns="http://www.w3.org/1999/xhtml" 
				xmlns:ui="http://java.sun.com/jsf/facelets"
	  			xmlns:h="http://java.sun.com/jsf/html" 
	  			xmlns:rich="http://richfaces.org/rich"
	  			xmlns:a4j="http://richfaces.org/a4j"
	  			xmlns:f="http://java.sun.com/jsf/core">

	<ui:define name="scripts">
		<script src="/tiwipro/js/FusionCharts.js" type="text/javascript"></script>	
		<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAyQYKk4__l80DyIsqLPvvuxTRFLl8Tcq3arEgFHYFeOMvEMiJ8RQehhrYXPIDrf1muScWAd1MXrlVkQ" type="text/javascript"></script>	
	</ui:define>

	<ui:param name="homeSelected" value="current" />
	
	<ui:define name="subnavigation">
		<ui:include src="../includes/reports/subNavigation.xhtml" />
	</ui:define>
	
	<ui:define name="content">
<div id="wrapper">

<ul id="grid_nav">
	<li class="l grid_icon"><img src="images/ico_line.png" /></li>
	<li class="l grid_title">Driver Performance: <h:outputText> NAME</h:outputText></li>
	<li class="l divider"><img src="/images/grid_nav_divider.png" /></li>
	<li class="l">
	
		<ul id="breadcrumb">
			<li class="first"><a href="/">Home</a></li>
			<li><a href="drivers.html">Drivers</a></li>
			<li class="last"><h:outputText></h:outputText></li>
		</ul>
	</li>
</ul>

<table width="940" border="0" cellspacing="0" cellpadding="0" align="center">
  <tr>
    <td width="330" valign="top">
<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="cal">Date Range </span>
						<span class="panel_links"></span>
					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					    <rich:panel id="date_picker_panel">
						<h:form>
							<table width="320" cellpadding="4" cellspacing="0" class="" id="">
							  <tbody>
							  <tr>
								<td width="73">Start Date </td>
								<td width="178">
									<a4j:outputPanel id="calendarStart" layout="block">
				                    	<rich:calendar value="#{driverTripsBean.startDate}"
				                        	locale="en/US"
				                        	popup="true"
				                        	datePattern="MMM d, yyyy"
				                        	showApplyButton="false" cellWidth="24px" cellHeight="22px"/>
				           			</a4j:outputPanel> 
								</td>
								<td width="51">to</td>
							  </tr>
							  <tr>
								<td>End Date </td>
								<td>
								  <a4j:outputPanel id="calendarEnd" layout="block">
				                    	<rich:calendar value="#{driverTripsBean.endDate}"
				                        	locale="en/US"
				                        	popup="true"
				                        	datePattern="MMM d, yyyy"
				                        	showApplyButton="false" cellWidth="24px" cellHeight="22px"/>
				           			</a4j:outputPanel>
								</td>
								<td></td>
							  </tr>
							  <tr>
							    <td> </td>
							    <td> <h:commandButton value="Apply Date Range" /></td>
							    <td> </td>
							    </tr>
							  </tbody>
						  </table>
						 </h:form>
						</rich:panel>
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="">Stats: #{driverTripsBean.startDateAsShortString} - #{driverTripsBean.endDateAsShortString}</span>
						<span class="panel_links"></span>
					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					    <div class="" id="">
								<table width="320" id="" cellpadding="4" cellspacing="0" class="">
								  <tbody>
								  <tr>
									<td width="240">Total Miles Driven:</td>
									<td width="70">268</td>
								  </tr>
								  <tr>
									<td>Total Stops: </td>
									<td>52</td>
								  </tr>
								  <tr>
								    <td>Total Idle Time: </td>
								    <td>32:12</td>
								    </tr>
								  <tr>
								    <td>Total Trips:</td>
								    <td>58</td>
								    </tr>
								  <tr>
								    <td>Total Drive Time:</td>
								    <td>6:38:22</td>
								    </tr>
								  </tbody>
						  </table>
						</div>
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="">Trips (58)</span>
						<span class="panel_links"></span>
					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					    <div class="datagrid" id="trips_table-paginationListWrapBottom">
					      <table width="320" cellpadding="0" cellspacing="0" class="sortable-onload-0 no-arrow rowstyle-alt colstyle-alt paginate-10 max-pages-5" id="trips_table">
                            <thead>
                              <tr>
                                <th width="45" class=""> ;</th>
                                <th width="226" height="27" class="">Address</th>
                                <th width="55" class="">Time</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td><img src="images/ico_start.png" width="21" height="20" /></td>
                                <td>154 S 10th St</td>
                                <td>1:46</td>
                              </tr>
                              <tr>
                                <td><img src="images/ico_idle.png" width="20" height="20" /></td>
                                <td>188 S 11th St</td>
                                <td>0:28</td>
                              </tr>
                              <tr>
                                <td><img src="images/ico_idle.png" width="20" height="20" /></td>
                                <td>213 S 14th St</td>
                                <td>1:12</td>
                              </tr>
 
                            </tbody>
                          </table>
					    </div>
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="">Settings </span>
						<span class="panel_links"></span>
					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					    <div class="" id="">
							<table width="320" cellpadding="4" cellspacing="0" class="" id="settings">
								  <tbody>
								  <tr>
									<td width="290">Show all Trips on this map</td>
								    <td width="20">
								      <input type="checkbox" name="checkbox" value="checkbox" />
								    </td>
								    </tr>
								  <tr>
									<td>Show idle markers</td>
								    <td>
								      <input type="checkbox" name="checkbox2" value="checkbox" />
								    </td>
								    </tr>
								  <tr>
								    <td>Show warnings</td>
								    <td>
								      <input name="checkbox3" type="checkbox" value="checkbox" checked="checked" />
								    </td>
								    </tr>
								  </tbody>
								</table>
						</div>
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="">Legend</span>
						<span class="panel_links"></span>
					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					    <div class="" id="">
							<div class="" id="">
								<table width="320" id="legend" cellpadding="4" cellspacing="0" class="sortable-onload-show no-arrow colstyle-alt paginate-15 max-pages-4">
								  <tbody>
								  <tr>
									<td width="25"><img src="../images/ico_start.png" width="21" height="20" /></td>
									<td width="120">Start</td>
								    <td width="30"><img src="../images/ico_stop.png" width="20" height="20" /></td>
								    <td width="119">Engine Stop</td>
								  </tr>
								  <tr>
									<td><img src="../images/ico_idle.png" width="20" height="20" /></td>
									<td>Engine Idle</td>
								    <td><img src="../images/ico_new_trip.png" width="21" height="20" /></td>
								    <td>New Trip</td>
								  </tr>
								  <tr>
								    <td><img src="../images/ico_violation.png" width="20" height="20" /></td>
								    <td>Violation</td>
								    <td><img src="../images/ico_end_trip.png" width="21" height="20" /></td>
								    <td>End</td>
								    </tr>
								  </tbody>
								</table>
							</div>
						</div>
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
	</td>
    <td width="10"><img src="images/x.gif" width="10" /></td>
    <td width="600" valign="top">
		<!-- START PANEL -->
		<div class="" style="width:600px; margin: 0 auto 0 auto;">
			<div class="panel_nw">
				<div class="panel_title">
					<span class="vehicle">Trips by #{driverBean.driverName}</span>
					<span class="panel_links"></span></div>
			</div>
			<div class="panel_w">
			  <div class="panel_content" align="center">
				<!-- Start Trip table --> 
					<h:form id="trendTable">
						<rich:dataTable 
						value="#{driverTripsBean.trips}" 
						id="items"
						var="item" styleClass="datagrid"
						rowClasses="trendTableOdd,trendTableEven" cellspacing="1" rows="10"  
						width="100%"
						binding="#{trendTable.table}">  <!-- //TODO: Make generic Odd Even CSS -->

							<!-- Data -->
										
							<rich:column sortBy="#{item.startTime}" width="59">
								<f:facet name="header">
									<h:outputText value="Date" />
								</f:facet>
									<h:outputText value="#{item.startTime}" />
							</rich:column>
							
							<rich:column sortBy="#{item.startTime}" width="74">
								<f:facet name="header">
									<h:outputText value="Time" />
								</f:facet>
									<h:outputText value="#{item.startTime}" />
							</rich:column>
							
							<rich:column sortBy="#{item.mileage}" width="68">
								<f:facet name="header">
									<h:outputText value="Dist" />
								</f:facet>
								<h:outputText value="#{item.mileage}" />		
							</rich:column>
							
							<rich:column sortBy="#{item.mileage}" wdith="168">
								<f:facet name="header">
									<h:outputText value="Start" />
								</f:facet>
								<h:outputText value="{item.mileage}" />
							</rich:column>
							
							<rich:column sortBy="#{item.endAddressStr}" width="150">
								<f:facet name="header">
									<h:outputText value="End" />
								</f:facet>
								<h:outputText value="#{item.endAddressStr}" />
							</rich:column>
							
							<rich:column sortBy="#{item.mileage}" width="67">
								<f:facet name="header">
									<h:outputText value="Duration" />
								</f:facet>
								<h:outputText value="#{item.mileage}" />
							</rich:column>
						</rich:dataTable>
					</h:form> 
				<!-- End Trip table -->

			  </div>
			</div>
			<div class="panel_sw">
				<div class="panel_statusbar"></div>
			</div>
		</div>
		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
		<!-- START PANEL -->
		<div class="" style="width:600px; margin: 0 auto 0 auto;">
			<div class="panel_nw">
				<div class="panel_title">
					<span class="map">Map</span>
					<span class="panel_links"></span></div>
			</div>
			<div class="panel_w">
			  <div class="panel_content" align="center">
			  <h:panelGroup styleClass="map-border" layout="block">
							<div id="map-canvas" style="width:588px;height:500px;border:0"></div>
					  	</h:panelGroup>
					    <script type="text/javascript">
      						if (GBrowserIsCompatible()) {
        						map = new GMap2(document.getElementById("map-canvas"));
        						map.addControl(new GLargeMapControl());
        						map.addControl(new GMapTypeControl());
        						map.addControl(new GOverviewMapControl()); 
								map.setCenter(new GLatLng(41.0,-116.0 ), 5);
								map.setMapType(G_MAP_TYPE);
      						}
    					</script>  
			  </div>
			</div>
			<div class="panel_sw">
				<div class="panel_statusbar"></div>
			</div>
		</div>
		<!-- END PANEL -->
	</td>
  </tr>
</table>
</div>
</ui:define>

</ui:composition>

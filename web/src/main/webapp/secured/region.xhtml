<ui:composition template="/layout/layout.xhtml" 
			xmlns="http://www.w3.org/1999/xhtml" 
			xmlns:ui="http://java.sun.com/jsf/facelets"
  			xmlns:h="http://java.sun.com/jsf/html" 
  			xmlns:rich="http://richfaces.org/rich"
  			xmlns:a4j="http://richfaces.org/a4j"
  			xmlns:iwi="http://pro.tiwi.com/jsf"
  			xmlns:f="http://java.sun.com/jsf/core">
  			
	<ui:define name="scripts">
		<script src="/tiwipro/js/FusionCharts.js" type="text/javascript"></script>	
		<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=#{gmBean.key}" type="text/javascript"></script>			
	</ui:define>  			

	<ui:param name="homeSelected" value="current" />

	<ui:define name="content">
	
		<h:form id="setupGroup">
			<h:inputHidden value="#{groupLevelBean.ping}" />
		</h:form>
	
		<ul id="grid_nav">
			<li class="l grid_icon"><img src="images/ico_line.png" /></li>
			<li class="l grid_title">Overview</li>
			<li class="l divider"><img src="/images/grid_nav_divider.png" /></li>
			<li class="l"></li>
			<li class="r grid_icon"><img src="images/ico_help.png" /></li>
			<li class="r divider"><img src="/images/grid_nav_divider.png" /></li>
		</ul>

		<table width="940" border="0" cellspacing="0" cellpadding="0" align="center" class="dash_table">

  			<tr>
    			<td width="465" valign="top">
    			<!-- START TREND PANEL -->		
				<!-- leave reRenderList alone -->												
		<div class="">
		<div class="panel_nw">
			<div class="panel_title">
				<span class="line">Trend</span> 
					<ui:include src="/includes/dateLinksWithFlyOut.xhtml">
						<ui:param name="ajaxForm" value="trend_form" />
						<ui:param name="ajaxStatusID" value="trend_status" /> 
						<ui:param name="reRenderList" value="hiddenField1,xypanel,items"/>
						<ui:param name="thirtyDaysOn" value="#{trendBean.styleClass30Days}"/>
						<ui:param name="threeMonthsOn" value="#{trendBean.styleClass3Months}"/>
						<ui:param name="sixMonthsOn" value="#{trendBean.styleClass6Months}"/>
						<ui:param name="twelveMonthsOn" value="#{trendBean.styleClass12Months}"/>
			            <ui:param name="duration" value="#{navigationBean.duration}" />
			            <ui:param name="flyNavRule" value="go_regionFlyOut" />
						<ui:param name="flySelectedTab" value="trend_full_screen" />  
						<ui:param name="flyOutImage" value="ico_expand.png" />
					</ui:include>	
			</div>

		
		</div>


					<div class="panel_w">
						<h:inputHidden id="starter" value="#{trendBean.start}">
						</h:inputHidden>

						<div class="panel_content">
				<!-- Start xy graph --> 
							<rich:panel id="xypanel" 
									style="height:300;width:445">
								<h:inputHidden value="#{trendBean.lineDef}" 
									id="hiddenField1" />

								<div id="chartdiv2" align="center"></div>
								<script type="text/javascript">
									var targetElement = document.getElementById("hiddenField1");
							
									var chart = new FusionCharts("/tiwipro/fusioncharts/MSLine.swf", "ChartId", "445", "300", "0", "0");						   						   		
									chart.setDataXML(targetElement.value);
					   			   
									chart.render("chartdiv2");
								</script>
							</rich:panel> 
				<!-- End xy graph -->

							<div class="spacer"></div>
							<div class="spacer"></div>				
				
							<div style="border: 1px solid black; height: 40px; width:445px;">
								<rich:panel>	
									<rich:spacer height="10"/>
									<div style="text-align: right;" >													
										<h:outputText 
											id="countString" value="#{trendBean.countString}"/>
										<rich:spacer width="10"/>
									</div>									
								</rich:panel>
							</div>
				
							<div class="spacer"></div>
							<div class="spacer"></div>		
				
							<div class="datagrid">
				
								<h:form id="trendTable">	
								
        							<rich:datascroller id="topScroller" for="items" immediate="true"
        								scrollerListener="#{trendBean.scrollerListener}" 
        								reRender="bottomScroller,countString,starter,items,xypanel">        			
        							</rich:datascroller>					
			

						<rich:dataTable value="#{trendBean.scoreableEntities}" id="items"
							var="item" styleClass="datagrid"
							rowClasses="trendTableOdd,trendTableEven" 
							cellspacing="1" rows="#{trendBean.numRowsPerPg}" width="100%">

											<rich:column width="20">
												<f:facet name="header">
													<h:outputText value=" " />
												</f:facet>
												<rich:spacer width="17" height="17"
													style="background-color:#{item.colorKey};border-style:solid;border-width:1px;border-color:#000000">
												</rich:spacer>
											</rich:column>
											<rich:column sortBy="#{item.se.identifier}">
												<f:facet name="header">
													<h:outputText value="Region" />
												</f:facet>
												<h:outputLink value="#{item.goTo}">
													<h:outputText value="#{item.se.identifier}" />
												</h:outputLink>

											</rich:column>
											<rich:column width="73" sortBy="#{item.se.score}">
												<f:facet name="header">
													<h:outputText value="Score" />
												</f:facet>
												<iwi:scoreBox style="#{item.style}" score="#{item.se.score}"/>
												
											</rich:column>

										</rich:dataTable>
						
									<rich:datascroller id="bottomScroller" for="items" immediate="true"
    									scrollerListener="#{trendBean.scrollerListener}"
        								reRender="topScroller,countString,starter,items,xypanel">        			
        							</rich:datascroller>        		
        		
								</h:form> 
				<!-- End Trend table -->
							</div>

						</div>

						<div class="panel_sw">
							<div class="panel_statusbar"></div>
						</div>

					</div>
	
				</div>							 

				<!-- END PANEL -->
		
				<div class="spacer"></div>		

			</td>
	
    		<td width="10"><img src="images/x.gif" width="10" /></td>
	
    		<td width="465" valign="top">
    			<!-- START PANEL -->
				<!-- leave reRenderList alone -->	
				<ui:include src="/includes/breakdown.xhtml">	
					<ui:param name="reRenderList" value="breakdownForm,overallPanel,hiddenField3"/>
					<ui:param name="ajaxStatusID" value="overall_status" /> 
					<ui:param name="pieDef" value="#{breakdownBean.overallPieDef}"/>
					<ui:param name="overallScoreStyle" value="#{breakdownBean.overallScoreStyle}"/>
					<ui:param name="overallScore" value="#{breakdownBean.overallScore}"/>
					<ui:param name="duration" value="#{breakdownBean.duration}" />   
            		<ui:param name="thirtyDaysOn" value="#{breakdownBean.styleClass30Days}"/>
					<ui:param name="threeMonthsOn" value="#{breakdownBean.styleClass3Months}"/>
					<ui:param name="sixMonthsOn" value="#{breakdownBean.styleClass6Months}"/>
					<ui:param name="twelveMonthsOn" value="#{breakdownBean.styleClass12Months}"/>
					<ui:param name="flyNavRule" value="go_regionFlyOut" />
					<ui:param name="flySelectedTab" value="overall_full_screen" />
					<ui:param name="flyOutImage" value="ico_expand.png" />   
				</ui:include>	
				<!-- END PANEL -->

				<!-- START FLEET MAP PANEL -->
				<!-- leave reRenderList alone -->	
				<ui:include src="/includes/liveFleetMap.xhtml">
					<ui:param name="mapheight" value="height:360px"/>
					<ui:param name="mapwidth" value="width:435px"/>
					<ui:param name="mapxcenter" value="41.0"/>
					<ui:param name="mapycenter" value="-116.0"/>
				</ui:include>
				<!-- END PANEL -->
		
				<div class="spacer"></div>
		
				<!-- START ESTIMATED FUEL EFFICIENCY PANEL -->
				<!-- leave reRenderList alone -->
<!--	 			<ui:include src="/includes/fuelEfficiencyChart.xhtml"> -->
<!--	 				<ui:param name="reRenderList" value="barForm,barpanel,hiddenField3"/> -->
<!--	 				<ui:param name="title" value="Estimated Fuel Efficiency"/> -->
<!--	        		<ui:param name="barheight" value="440"/> -->
<!--	        		<ui:param name="barwidth" value="350"/> -->
<!--	        		<ui:param name="barDef" value="#{fuelBean.barDef}"/> -->  
<!--	        		<ui:param name="duration" value="#{fuelBean.duration}" /> -->
<!--	        		<ui:param name="thirtyDaysOn" value="#{fuelBean.styleClass30Days}"/> -->
<!--	 				<ui:param name="threeMonthsOn" value="#{fuelBean.styleClass3Months}"/> -->
<!--	 				<ui:param name="sixMonthsOn" value="#{fuelBean.styleClass6Months}"/> -->
<!--		 			<ui:param name="twelveMonthsOn" value="#{fuelBean.styleClass12Months}"/> -->       
<!--				</ui:include> -->
				<!-- END PANEL -->
			</td>
  		</tr>
	</table>

</ui:define>

</ui:composition>

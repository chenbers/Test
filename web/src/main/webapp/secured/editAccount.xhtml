<ui:composition template="/layout/layout.xhtml" 
				xmlns="http://www.w3.org/1999/xhtml" 
				xmlns:ui="http://java.sun.com/jsf/facelets"
  				xmlns:h="http://java.sun.com/jsf/html" 
  				xmlns:rich="http://richfaces.org/rich"
  				xmlns:a4j="http://richfaces.org/a4j"
  				xmlns:iwi="http://pro.tiwi.com/jsf"
  				xmlns:f="http://java.sun.com/jsf/core">
  
  <ui:define name="content">
  
  <style>
    .rich-message {margin:5px;display:block;}
  </style>
  
  <h:form id="my_form">
 
    <ul id="grid_nav">
      <li class="r">
        <h:commandButton action="#{myAccountBean.saveFormAction}" styleClass="left"><span class="save">Save</span></h:commandButton>
        <h:outputText value=" " /><button type="submit" class="left" onclick="parent.location.href='myAccount.faces'; return false;"><span class="cancel">Cancel</span></button>
      </li>
    </ul>
    
    
    <table class="dash_table" width="940" align="center" border="0" cellpadding="0" cellspacing="0">
      <tbody>
        <tr>
          <td colspan="3" valign="top">
        
            <!-- START PANEL -->
            <div class="">
              <div class="panel_nw">
                <div class="panel_title">
                  <span class="account"><h:outputText value="#{messages.header_myAccount}" /></span>
                  <span class="panel_links"> </span>
                </div>
              </div>
              <div class="panel_w">
                <div class="panel_content">
                  <table width="930" border="0" cellpadding="0" cellspacing="0">
                    <tbody>
                      <tr>
                        <td width="460">
                          <div class="add_section_title"><h:outputText value="#{messages.myAccount_accountInformation}" /></div>
                            <table width="100%" border="0" cellpadding="4" cellspacing="0">
                              <tbody>
                                <tr>
                                  <td width="100"><h:outputText value="#{messages.myAccount_name}" /></td>
                                  <td><h:outputText value="#{myAccountBean.fullName}"/></td>
                                </tr>
                                <tr>
                                  <td width="100"><h:outputText value="#{messages.myAccount_region}" /></td>
                                  <td><h:outputText value="#{myAccountBean.regionName}"/></td>
                                </tr>
                                <tr>
                                  <td width="100"><h:outputText value="#{messages.myAccount_team}" /></td>
                                  <td><h:outputText value="#{myAccountBean.teamName}"/></td>
                                </tr>
                            </tbody>
                          </table>
                        </td>

                        <td width="10"><h:graphicImage value="/images/x.gif" width="10"/></td>
                        
                        <td valign="top" width="460">
                          <div class="add_section_title"><h:outputText value="#{messages.myAccount_loginInformation}" /></div>
                          <table width="100%" border="0" cellpadding="4" cellspacing="0">
                            <tbody>
                              <tr>
                                <td width="100"><h:outputText value="#{messages.myAccount_userName}" /></td>
                                <td><h:outputText value="#{myAccountBean.user.username}"/></td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="panel_sw">
                <div class="panel_statusbar"></div>
      
              </div>
            </div>
        <!-- END PANEL -->
        
          </td>
        </tr>
        <tr>
          <td colspan="3" style="height:10px"> </td>
        </tr>
        <tr>
          <td valign="top" width="465">
          
            <!-- START PANEL -->
            <div class="">
              <div class="panel_nw">
                <div class="panel_title">
                  <span class="notify"><h:outputText value="#{messages.myAccount_notifications}" /></span>
                </div>
              </div>
              <div class="panel_w">
                <div class="panel_content">
                  <table width="100%" border="0" cellpadding="4" cellspacing="0">
                    <tbody>
                      <tr>
                        <td width="16"><h:graphicImage value="/images/ico_info.png" width="16" height="16" /></td>
                        <td width="76"><h:outputText value="#{messages.myAccount_information}" /></td>
                        <td>
                          <h:selectOneMenu styleClass="text" id="informationSelectType" value="#{myAccountBean.informationSelectType}" onchange="refreshVisibility()">
                            <f:selectItem itemLabel="None" itemValue="0"/>
                            <f:selectItem itemLabel="Email" itemValue="1"/>
                            <f:selectItem itemLabel="Phone" itemValue="2"/>
                            <f:selectItem itemLabel="Text" itemValue="3"/>
                          </h:selectOneMenu>
                          <h:selectOneMenu styleClass="text" id="informationSelectEmail" value="#{myAccountBean.informationSelectEmail}">
                            <f:selectItem itemLabel="" itemValue="1"/> <!-- label set by calling refrehValues() -->
                            <f:selectItem itemLabel="" itemValue="2"/>
                          </h:selectOneMenu>
                          <h:selectOneMenu styleClass="text" id="informationSelectPhone" value="#{myAccountBean.informationSelectPhone}">
                            <f:selectItem itemLabel="" itemValue="3"/>
                            <f:selectItem itemLabel="" itemValue="4"/>
                            <f:selectItem itemLabel="" itemValue="5"/>
                          </h:selectOneMenu>
                          <h:selectOneMenu styleClass="text" id="informationSelectText" value="#{myAccountBean.informationSelectText}">
                            <f:selectItem itemLabel="" itemValue="6"/>
                            <f:selectItem itemLabel="" itemValue="7"/>
                          </h:selectOneMenu>
                        </td>
                      </tr>
                      <tr>
                        <td width="16"><h:graphicImage value="/images/ico_warning.png" width="16" height="16" /></td>
                        <td width="76"><h:outputText value="#{messages.myAccount_warning}" /></td>
                        <td>
                          <h:selectOneMenu styleClass="text" id="warningSelectType" value="#{myAccountBean.warningSelectType}" onchange="refreshVisibility()">
                            <f:selectItem itemLabel="None" itemValue="0"/>
                            <f:selectItem itemLabel="Email" itemValue="1"/>
                            <f:selectItem itemLabel="Phone" itemValue="2"/>
                            <f:selectItem itemLabel="Text" itemValue="3"/>
                          </h:selectOneMenu>
                          <h:selectOneMenu styleClass="text" id="warningSelectEmail" value="#{myAccountBean.warningSelectEmail}">
                            <f:selectItem itemLabel="" itemValue="1"/> <!-- label set by calling refrehValues() -->
                            <f:selectItem itemLabel="" itemValue="2"/>
                          </h:selectOneMenu>
                          <h:selectOneMenu styleClass="text" id="warningSelectPhone" value="#{myAccountBean.warningSelectPhone}">
                            <f:selectItem itemLabel="" itemValue="3"/>
                            <f:selectItem itemLabel="" itemValue="4"/>
                            <f:selectItem itemLabel="" itemValue="5"/>
                          </h:selectOneMenu>
                          <h:selectOneMenu styleClass="text" id="warningSelectText" value="#{myAccountBean.warningSelectText}">
                            <f:selectItem itemLabel="" itemValue="6"/>
                            <f:selectItem itemLabel="" itemValue="7"/>
                          </h:selectOneMenu>
                        </td>
                      </tr>
                      <tr>
                        <td width="16"><h:graphicImage value="/images/ico_critical.png" width="16" height="16" /></td>
                        <td width="76"><h:outputText value="#{messages.myAccount_critical}" /></td>
                        <td>
                          <h:selectOneMenu styleClass="text" id="criticalSelectType" value="#{myAccountBean.criticalSelectType}" onchange="refreshVisibility()">
                            <f:selectItem itemLabel="None" itemValue="0"/>
                            <f:selectItem itemLabel="Email" itemValue="1"/>
                            <f:selectItem itemLabel="Phone" itemValue="2"/>
                            <f:selectItem itemLabel="Text" itemValue="3"/>
                          </h:selectOneMenu>
                          <h:selectOneMenu styleClass="text" id="criticalSelectEmail" value="#{myAccountBean.criticalSelectEmail}">
                            <f:selectItem itemLabel="" itemValue="1"/> <!-- label set by calling refrehValues() -->
                            <f:selectItem itemLabel="" itemValue="2"/>
                          </h:selectOneMenu>
                          <h:selectOneMenu styleClass="text" id="criticalSelectPhone" value="#{myAccountBean.criticalSelectPhone}">
                            <f:selectItem itemLabel="" itemValue="3"/>
                            <f:selectItem itemLabel="" itemValue="4"/>
                            <f:selectItem itemLabel="" itemValue="5"/>
                          </h:selectOneMenu>
                          <h:selectOneMenu styleClass="text" id="criticalSelectText" value="#{myAccountBean.criticalSelectText}">
                            <f:selectItem itemLabel="" itemValue="6"/>
                            <f:selectItem itemLabel="" itemValue="7"/>
                          </h:selectOneMenu>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="panel_sw">
                <div class="panel_statusbar"></div>
              </div>
            </div>
            <!-- END PANEL -->
          </td>
        
          <td width="10"><h:graphicImage value="/images/x.gif" width="10"/></td>
        
          <td valign="top" width="465">
          
          <!-- START PANEL -->
            <div class="">
              <div class="panel_nw">
                <div class="panel_title">
                  <span class="contact"><h:outputText value="#{messages.myAccount_contactInformation}" /></span>
                </div>
              </div>
              <div class="panel_w">
                <div class="panel_content">
                  <div class="add_section_title"><h:outputText value="#{messages.myAccount_email}" /></div>
                    <table width="100%" border="0" cellpadding="4" cellspacing="0">
                      <tbody>
                        <tr>
                          <td width="100"><h:outputText value="#{messages.myAccount_primary}" /></td>
                          <td>
                            <rich:message for="priEmail" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText id="priEmail" value="#{myAccountBean.alertContact.priEmail}" 
                              size="40" maxlength="62" onkeyup="refreshValues()" validator="#{myAccountBean.validateEmail}" />
                          </td>
                        </tr>
                        <tr>
                          <td width="100"><h:outputText value="#{messages.myAccount_secondary}" /></td>
                          <td>
                            <rich:message for="secEmail" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText id="secEmail" value="#{myAccountBean.alertContact.secEmail}" 
                              size="40" maxlength="62" onkeyup="refreshValues()" validator="#{myAccountBean.validateEmail}" />
                          </td>
                        </tr>
                      </tbody>
                    </table>
                             
                    <div class="add_section_title"><h:outputText value="#{messages.myAccount_phone}" /></div>
                    <table width="100%" border="0" cellpadding="4" cellspacing="0">
                      <tbody>
                        <tr>
                          <td width="100"><h:outputText value="#{messages.myAccount_primary}" /></td>
                          <td>
                            <rich:message for="priPhone" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText id="priPhone" value="#{myAccountBean.alertContact.priPhone}" size="40" maxlength="22" onkeyup="refreshValues()" validatorMessage="#{messages.myAccount_phoneFormat}">
                              <f:validator validatorId="com.inthinc.pro.validators.RegexValidator" />
                              <f:attribute name="regex" value="\D?\d{3}\D*\d{3}\D?\d{4}" />
                            </h:inputText>
                          </td>
                        </tr>
                        <tr>
                          <td width="100"><h:outputText value="#{messages.myAccount_secondary}" /></td>
                          <td>
                            <rich:message for="secPhone" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText id="secPhone" value="#{myAccountBean.alertContact.secPhone}" size="40" maxlength="22" onkeyup="refreshValues()" validatorMessage="#{messages.myAccount_phoneFormat}">
                              <f:validator validatorId="com.inthinc.pro.validators.RegexValidator" />
                              <f:attribute name="regex" value="\D?\d{3}\D*\d{3}\D?\d{4}" />
                            </h:inputText>
                          </td>
                        </tr>
                        <tr>
                          <td width="100"><h:outputText value="#{messages.myAccount_cell}" /></td>
                          <td>
                            <rich:message for="cellPhone" errorClass="field-error" fatalClass="field-error" warnClass="field-warning" infoClass="field-info" styleClass="field-msg" />
                            <h:inputText id="cellPhone" value="#{myAccountBean.alertContact.cellPhone}" size="40" maxlength="22" onkeyup="refreshValues()" validatorMessage="#{messages.myAccount_phoneFormat}">
                              <f:validator validatorId="com.inthinc.pro.validators.RegexValidator" />
                              <f:attribute name="regex" value="\D?\d{3}\D*\d{3}\D?\d{4}" />
                            </h:inputText>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                                  
                    <div class="add_section_title"><h:outputText value="#{messages.myAccount_textMessages}" /></div>
                    <table width="100%" border="0" cellpadding="4" cellspacing="0">
                      <tbody>
                        <tr>
                          <td width="100"><h:outputText value="#{messages.myAccount_primary}" /></td>
                          <td><h:inputText id="priText" value="#{myAccountBean.alertContact.priText}" size="40" maxlength="62" onkeyup="refreshValues()"/></td>
                        </tr>
                        <tr>
                          <td width="100"><h:outputText value="#{messages.myAccount_secondary}" /></td>
                          <td><h:inputText id="secText" value="#{myAccountBean.alertContact.secText}" size="40" maxlength="62" onkeyup="refreshValues()"/></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="panel_sw">
                  <div class="panel_statusbar"></div>
                </div>
              </div>
              <!-- END PANEL -->
            </td>
          
          </tr>
        </tbody>
      </table>
    </h:form>  
    
    
    <script type="text/javascript" language="Javascript">
    function refreshValues()
    {
      setValueText(document.getElementById("my_form:informationSelectEmail").options[0], "Primary - ", document.getElementById("my_form:priEmail").value);
      setValueText(document.getElementById("my_form:informationSelectEmail").options[1], "Secondary - ", document.getElementById("my_form:secEmail").value);
      setValueText(document.getElementById("my_form:informationSelectText").options[0], "Primary - ", document.getElementById("my_form:priText").value);
      setValueText(document.getElementById("my_form:informationSelectText").options[1], "Secondary - ", document.getElementById("my_form:secText").value);
      setValueText(document.getElementById("my_form:informationSelectPhone").options[0], "Primary - ", document.getElementById("my_form:priPhone").value);
      setValueText(document.getElementById("my_form:informationSelectPhone").options[1], "Secondary - ", document.getElementById("my_form:secPhone").value);
      setValueText(document.getElementById("my_form:informationSelectPhone").options[2], "Cell - ", document.getElementById("my_form:cellPhone").value);
      
      setValueText(document.getElementById("my_form:warningSelectEmail").options[0], "Primary - ", document.getElementById("my_form:priEmail").value);
      setValueText(document.getElementById("my_form:warningSelectEmail").options[1], "Secondary - ", document.getElementById("my_form:secEmail").value);
      setValueText(document.getElementById("my_form:warningSelectText").options[0], "Primary - ", document.getElementById("my_form:priText").value);
      setValueText(document.getElementById("my_form:warningSelectText").options[1], "Secondary - ", document.getElementById("my_form:secText").value);
      setValueText(document.getElementById("my_form:warningSelectPhone").options[0], "Primary - ", document.getElementById("my_form:priPhone").value);
      setValueText(document.getElementById("my_form:warningSelectPhone").options[1], "Secondary - ", document.getElementById("my_form:secPhone").value);
      setValueText(document.getElementById("my_form:warningSelectPhone").options[2], "Cell - ", document.getElementById("my_form:cellPhone").value);
      
      setValueText(document.getElementById("my_form:criticalSelectEmail").options[0], "Primary - ", document.getElementById("my_form:priEmail").value);
      setValueText(document.getElementById("my_form:criticalSelectEmail").options[1], "Secondary - ", document.getElementById("my_form:secEmail").value);
      setValueText(document.getElementById("my_form:criticalSelectText").options[0], "Primary - ", document.getElementById("my_form:priText").value);
      setValueText(document.getElementById("my_form:criticalSelectText").options[1], "Secondary - ", document.getElementById("my_form:secText").value);
      setValueText(document.getElementById("my_form:criticalSelectPhone").options[0], "Primary - ", document.getElementById("my_form:priPhone").value);
      setValueText(document.getElementById("my_form:criticalSelectPhone").options[1], "Secondary - ", document.getElementById("my_form:secPhone").value);
      setValueText(document.getElementById("my_form:criticalSelectPhone").options[2], "Cell - ", document.getElementById("my_form:cellPhone").value);
    }
    function setValueText(element, preface, text)
    {
      if (text == "")
      {
        element.text = "&lt;empty&gt;";
      }
      else
      {
        element.text = preface + text;
      }
    }
    function refreshVisibility()
    {
      refreshVisibilityImpl("information");
      refreshVisibilityImpl("warning");
      refreshVisibilityImpl("critical");
    }
    function refreshVisibilityImpl(type)
    {
      document.getElementById("my_form:" + type + "SelectEmail").style.display = "none";
      document.getElementById("my_form:" + type + "SelectText").style.display = "none";
      document.getElementById("my_form:" + type + "SelectPhone").style.display = "none";
      switch (document.getElementById("my_form:" + type + "SelectType").selectedIndex)
      {
        case 1:
          document.getElementById("my_form:" + type + "SelectEmail").style.display = "block";
          break;
        case 2:
          document.getElementById("my_form:" + type + "SelectPhone").style.display = "block";
          break;
        case 3:
          document.getElementById("my_form:" + type + "SelectText").style.display = "block";
          break;
      }
    }
    refreshValues();
    refreshVisibility();
    </script>
        
  </ui:define>

</ui:composition>

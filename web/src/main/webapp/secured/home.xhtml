<ui:composition template="/layout/layout.xhtml" 
			xmlns="http://www.w3.org/1999/xhtml" 
			xmlns:ui="http://java.sun.com/jsf/facelets"
  			xmlns:h="http://java.sun.com/jsf/html" 
  			xmlns:rich="http://richfaces.org/rich"
  			xmlns:a4j="http://richfaces.org/a4j"
  			xmlns:f="http://java.sun.com/jsf/core"
  			xmlns:iwi="http://pro.tiwi.com/jsf">

	<ui:define name="scripts">
		<script src="/tiwipro/js/FusionCharts.js" type="text/javascript"></script>		
	</ui:define>

	<ui:param name="homeSelected" value="current" />

	<ui:define name="content">
			
		<ul id="grid_nav">
			<li class="l grid_icon"><img src="/tiwipro/images/ico_line.png" /></li>
			<li class="l grid_title">Overview</li>
			<li class="l divider"><img src="/tiwipro/images/grid_nav_divider.png" /></li>
			<li class="l">
	
				<ul id="breadcrumb">
					
				</ul>
	
			</li>
			<li class="r grid_icon"><img src="/tiwipro/images/ico_help.png" /></li>
			<li class="r divider"><img src="/tiwipro/images/grid_nav_divider.png" /></li>
		</ul>
	
		
		<table width="940" border="0" cellspacing="0" cellpadding="0" align="center" class="dash_table">

  			<tr>
    			<td width="465" valign="top">
		<!-- START PANEL -->
					<div class="">
						<div class="panel_nw">
							<div class="panel_title">
								<span class="overall">Overall Score</span>
								<span class="panel_links">
								<a4j:form id="overall-form">        
  										<a4j:commandLink title="#{messages.duration_days}" immediate="true"
            								styleClass="#{(fleetOverviewBean.duration eq 'DAYS') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"
            								value="#{messages.duration_days}">
            								<a4j:actionparam name="duration" assignTo="#{fleetOverviewBean.duration}" value="DAYS" />
          								</a4j:commandLink><h:outputText value=" "></h:outputText>
          								<a4j:commandLink title="#{messages.duration_three}" immediate="true"
            								styleClass="#{(fleetOverviewBean.duration eq 'THREE') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"            								
            								value="#{messages.duration_three}">
            								<a4j:actionparam name="duration" assignTo="#{fleetOverviewBean.duration}" value="THREE" />
          								</a4j:commandLink><h:outputText value=" "></h:outputText>
          								<a4j:commandLink title="#{messages.duration_six}" immediate="true"
            								styleClass="#{(fleetOverviewBean.duration eq 'SIX') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"
            								value="#{messages.duration_six}">
            								<a4j:actionparam name="duration" assignTo="#{fleetOverviewBean.duration}" value="SIX" />
          								</a4j:commandLink><h:outputText value=" "></h:outputText>
          								<a4j:commandLink title="#{messages.duration_twelve}" immediate="true"
            								styleClass="#{(fleetOverviewBean.duration eq 'TWELVE') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"
            								value="#{messages.duration_twelve}">
            								<a4j:actionparam name="duration" assignTo="#{fleetOverviewBean.duration}" value="TWELVE" />
          								</a4j:commandLink>    
      								</a4j:form>
								</span>
							</div>
						</div>
						<div class="panel_w">
					  		<rich:panel bodyClass="panel_content" id="overallPanel" border="0">
					  			 <br />
					  			 <iwi:scoreBox style="#{fleetOverviewBean.overallScoreStyle}" score="#{fleetOverviewBean.overallScore}"/> 
					  		</rich:panel>
						</div>
						<div class="panel_sw">
							<div class="panel_statusbar"></div>
						</div>
					</div>
		<!-- END PANEL -->
		
					<div class="spacer"></div>
					
		<!-- START PANEL -->
					<div class="">
						
						<div class="panel_nw">
							<div class="panel_title">
								<span class="line">Trend</span>
								<span class="panel_links">	
      								<a4j:form id="days-back-form">        
  
          								<a4j:commandLink title="#{messages.duration_days}" immediate="true"
            								styleClass="#{(trendBean.duration eq 'DAYS') ? 'on' : ''}" action="#{trendBean.changeDurationAction}"
            								reRender="days-back-form,hiddenField1,xypanel,items"
            								value="#{messages.duration_days}">
            								<a4j:actionparam name="duration" assignTo="#{trendBean.duration}" value="DAYS" />
          								</a4j:commandLink><rich:spacer width="5"></rich:spacer> 
          								<a4j:commandLink title="#{messages.duration_three}" immediate="true"
            								styleClass="#{(trendBean.duration eq 'THREE') ? 'on' : ''}" action="#{trendBean.changeDurationAction}"
            								reRender="days-back-form,hiddenField1,xypanel,items"            								
            								value="#{messages.duration_three}">
            								<a4j:actionparam name="duration" assignTo="#{trendBean.duration}" value="THREE" />
          								</a4j:commandLink><rich:spacer width="5"></rich:spacer> 
          								<a4j:commandLink title="#{messages.duration_six}" immediate="true"
            								styleClass="#{(trendBean.duration eq 'SIX') ? 'on' : ''}" action="#{trendBean.changeDurationAction}"
            								reRender="days-back-form,hiddenField1,xypanel,items"
            								value="#{messages.duration_six}">
            								<a4j:actionparam name="duration" assignTo="#{trendBean.duration}" value="SIX" />
          								</a4j:commandLink> <rich:spacer width="5"></rich:spacer>  
          								<a4j:commandLink title="#{messages.duration_twelve}" immediate="true"
            								styleClass="#{(trendBean.duration eq 'TWELVE') ? 'on' : ''}" action="#{trendBean.changeDurationAction}"
            								reRender="days-back-form,hiddenField1,xypanel,items"
            								value="#{messages.duration_twelve}">
            								<a4j:actionparam name="duration" assignTo="#{trendBean.duration}" value="TWELVE" />
          								</a4j:commandLink>    
      								</a4j:form>									
								</span>
							</div>
						</div>
						
					
						<div class="panel_w">
					  		<div class="panel_content">
					  		<!-- Start xy graph -->
					  		<rich:panel id="xypanel" style="height:300;width:445">
					  			<h:inputHidden value="#{trendBean.lineDef}" id="hiddenField1"/>
					  																										  					  		
									<div id="chartdiv2" align="center"></div>							
									<script type="text/javascript">
										var targetElement = document.getElementById("hiddenField1");
							
						   				var chart = new FusionCharts("/tiwipro/fusioncharts/MSLine.swf", "ChartId", "445", "300", "0", "0");						   						   		
						   				chart.setDataXML(targetElement.value);
					   			   
						   				chart.render("chartdiv2");
									</script>
							</rich:panel>					
							<!-- End xy graph -->					
					
								<div class="spacer"></div>
																												
								<div class="datagrid">
							<!-- Start Trend table -->
							<h:form id="trendTable">
							<rich:dataTable					  
								value="#{trendBean.scoreableEntities}" id="items"
								var="item" styleClass="datagrid" rowClasses="trendTableOdd,trendTableEven"
								cellspacing="1" rows="10" width="100%"
    							binding="#{trendTable.table}">
				    						
    							<!-- Data -->		
								<rich:column width="20">
									<f:facet name="header">
                						<h:outputText value=" " />
                					</f:facet>	
									<rich:spacer width="17" height="17" style="background-color:#{item.colorKey};border-style:solid;border-width:1px;border-color:#000000"></rich:spacer>	    							
								</rich:column>
								<rich:column sortBy="#{item.identifier}">
									<f:facet name="header">
                						<h:outputText value="Region" />
                					</f:facet>	
                					<h:commandLink             								
            								value="#{item.identifier}"
            								action="go_region">
          							</h:commandLink>    
									
								</rich:column>
								<rich:column width="73" sortBy="#{item.score}">
									<f:facet name="header">         								
                						<h:outputText value="Score" />
                					</f:facet>
									<iwi:scoreBox style="#{item.style}" score="#{item.score}"/>
								</rich:column>
			
							</rich:dataTable>
							
							</h:form>
								<!-- End Trend table -->
						</div>
									
					  </div>

					</div>
			
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
				
			</div>
		<!-- END PANEL -->
	</td>
	
    <td width="10"><img src="/tiwipro/images/x.gif" width="10" /></td>
	
    <td width="465" valign="top">

		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="line">Score Breakdown</span>
						<span class="panel_links"><a href="#">details</a></span>
					</div>
				</div>

					<div class="panel_w">
					  <div class="panel_content">
					  
						<table width="455" border="0" cellspacing="0" cellpadding="0">
							<tr>
								<td width="74" valign="top" align="center"><img src="/tiwipro/images/legend_pie1to5.png" width="54" height="137" style="margin-top: 10px;" /></td>
								<td width="381" valign="top">
									<!-- Start pie chart -->
					  				<rich:panel id="piepanel" style="height:300;width:381">
					  					<h:inputHidden value="#{breakdownBean.pieDef}" id="hiddenField2"/>
					  													  										
										<div id="chartdiv" align="center"></div>									
										<script type="text/javascript">
											var targetElement1 = document.getElementById("hiddenField2");
							
											var chart2 = new FusionCharts("/tiwipro/fusioncharts/Pie2D.swf", "ChartId", "381", "300", "0", "0");										
											chart2.setDataXML(targetElement1.value);									   	   
											
											chart2.render("chartdiv");
										</script>
									</rich:panel>
								</td>
							</tr>
						</table>
						
					  </div>
					</div>
				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>

		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
		<!-- START PANEL -->
			<div class="">
				<div class="panel_nw">
					<div class="panel_title">
						<span class="gas">Estimated Fuel Efficiency</span>
						<span class="panel_links"><a href="#">3 months</a> <a href="#">6 months</a> <a href="#" class="on">12 months</a></span>

					</div>
				</div>
					<div class="panel_w">
					  <div class="panel_content">
					  <rich:panel id="barpanel" style="height:440;width:350">
	  					<h:inputHidden value="#{fuelBean.barDef}" id="hiddenField3"/>
					  				
						<div id="chartdiv3" align="center"></div>
						<script type="text/javascript">
							var targetElement2 = document.getElementById("hiddenField3");
							
							var chart = new FusionCharts("/tiwipro/fusioncharts/Column3D.swf", "ChartId", "440", "350", "0", "0");
							chart.setDataXML(targetElement2.value);	
							   
							chart.render("chartdiv3");
						</script>
					  </rich:panel>
					  </div>
					</div>

				<div class="panel_sw">
					<div class="panel_statusbar"></div>
				</div>
			</div>
		<!-- END PANEL -->
	</td>
  </tr>
</table>

	</ui:define>

</ui:composition>

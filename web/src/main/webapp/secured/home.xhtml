<ui:composition template="/layout/layout.xhtml" 
				xmlns="http://www.w3.org/1999/xhtml" 
				xmlns:ui="http://java.sun.com/jsf/facelets"
  				xmlns:h="http://java.sun.com/jsf/html" 
  				xmlns:rich="http://richfaces.org/rich"
  				xmlns:a4j="http://richfaces.org/a4j"
  				xmlns:f="http://java.sun.com/jsf/core">
  			
	<ui:define name="scripts">
		<script src="/tiwipro/js/FusionCharts.js" type="text/javascript"></script>		
	</ui:define>

	<ui:param name="homeSelected" value="current" />

	<ui:define name="content">
			
		<ul id="grid_nav">
			<li class="l grid_icon"><img src="/tiwipro/images/ico_line.png" /></li>
			<li class="l grid_title">Overview</li>
			<li class="l divider"><img src="/tiwipro/images/grid_nav_divider.png" /></li>
			<li class="l">
	
				<ul id="breadcrumb">
					
				</ul>
	
			</li>
			<li class="r grid_icon"><img src="/tiwipro/images/ico_help.png" /></li>
			<li class="r divider"><img src="/tiwipro/images/grid_nav_divider.png" /></li>
		</ul>
		<table width="940" border="0" cellspacing="0" cellpadding="0" align="center" class="dash_table">
  			<tr>
    			<td width="465" valign="top">
		<!-- START PANEL -->
					<div class="">
						<div class="panel_nw">
							<div class="panel_title">
								<span class="overall">Overall Score</span>
								<span class="panel_links">
								<a4j:form id="overall-form">        
  										<a4j:commandLink title="#{messages.duration_days}" immediate="true"
            								styleClass="#{(fleetOverviewBean.duration eq 'DAYS') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"
            								value="#{messages.duration_days}">
            								<a4j:actionparam name="duration" assignTo="#{fleetOverviewBean.duration}" value="DAYS" />
          								</a4j:commandLink><h:outputText value=" "></h:outputText>
          								<a4j:commandLink title="#{messages.duration_three}" immediate="true"
            								styleClass="#{(fleetOverviewBean.duration eq 'THREE') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"            								
            								value="#{messages.duration_three}">
            								<a4j:actionparam name="duration" assignTo="#{fleetOverviewBean.duration}" value="THREE" />
          								</a4j:commandLink><h:outputText value=" "></h:outputText>
          								<a4j:commandLink title="#{messages.duration_six}" immediate="true"
            								styleClass="#{(fleetOverviewBean.duration eq 'SIX') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"
            								value="#{messages.duration_six}">
            								<a4j:actionparam name="duration" assignTo="#{fleetOverviewBean.duration}" value="SIX" />
          								</a4j:commandLink><h:outputText value=" "></h:outputText>
          								<a4j:commandLink title="#{messages.duration_twelve}" immediate="true"
            								styleClass="#{(fleetOverviewBean.duration eq 'TWELVE') ? 'on' : ''}"
            								reRender="overall-form,overallPanel"
            								value="#{messages.duration_twelve}">
            								<a4j:actionparam name="duration" assignTo="#{fleetOverviewBean.duration}" value="TWELVE" />
          								</a4j:commandLink>    
      								</a4j:form>
      							</span>
							</div>
						</div>
						<div class="panel_w">
					  		<rich:panel bodyClass="panel_content" id="overallPanel" border="0">
					  	<table width="455" height="100" border="0" cellspacing="0" cellpadding="0" align="center">
                          <tr>
                            <td colspan="2" align="center" valign="top">
                              <table border="0" cellspacing="0" cellpadding="0" class="scorebox_lg">
                                <tr>

                                  <td width="188">
                                    <h4>Overall Score</h4>
                                    <a4j:status id="commonstatus"  startText="(In progress...)" stopText="(#{fleetOverviewBean.durationAsString})"/>
                                    </td>
                                  <td width="130" align="center">
                                    <ui:include src="../includes/scoreBox.xhtml">
								            <ui:param name="score" value="#{fleetOverviewBean.overallScore}" />
								            <ui:param name="scoreStyle" value="#{fleetOverviewBean.overallScoreStyle}" />
									</ui:include>
                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                          <tr>
                            <td width="64" valign="top" align="center"><img src="../images/legend_pie1to5.png" width="54" height="137" style="margin-top: 10px;" /></td>
                            <td width="381" valign="top">
                              <div id="chartdiv" align="center"></div>
			  					<h:inputHidden value="#{breakdownBean.pieDef}" id="hiddenField3"/>
										<script type="text/javascript">
											var targetElement3 = document.getElementById("hiddenField3");
											var chart2 = new FusionCharts("/tiwipro/fusioncharts/Pie2D.swf", "ChartId", "381", "300", "0", "0");										
											chart2.setDataXML(targetElement3.value);									   	   
											chart2.render("chartdiv");
										</script>
									</td>
                          </tr>
                        </table>
					  	</rich:panel>
						</div>
						<div class="panel_sw">
							<div class="panel_statusbar"></div>
						</div>
					</div>
		<!-- END PANEL -->
		<div class="spacer"></div>
	</td>
	
    <td width="10"><img src="/tiwipro/images/x.gif" width="10" /></td>
	
    <td width="465" valign="top">

		<!-- START TREND PANEL -->
		<!-- leave reRenderList alone -->
		<ui:include src="/includes/trendxychart.xhtml">
			<ui:param name="reRenderList" value="trendForm,hiddenField1,xypanel,items"/>
			<ui:param name="column_one" value="Fleet"/>
			<ui:param name="column_two" value="Score"/>
			<ui:param name="thirtyDaysOn" value="#{trendBean.styleClass30Days}"/>
			<ui:param name="threeMonthsOn" value="#{trendBean.styleClass3Months}"/>
			<ui:param name="sixMonthsOn" value="#{trendBean.styleClass6Months}"/>
			<ui:param name="twelveMonthsOn" value="#{trendBean.styleClass12Months}"/>
            <ui:param name="duration" value="#{trendBean.duration}" />
            <ui:param name="xyheight" value="300"/>
            <ui:param name="xywidth" value="445"/>
            <ui:param name="lineDef" value="#{trendBean.lineDef}"/>
            <ui:param name="scores" value="#{trendBean.scoreableEntities}"/>
            <ui:param name="table" value="#{trendTable.table}"/>
		</ui:include>
		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
	</td>
  </tr>
</table>

	</ui:define>

</ui:composition>

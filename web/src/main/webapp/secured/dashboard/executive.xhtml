<ui:composition template="/layout/layout.xhtml" 
	            xmlns="http://www.w3.org/1999/xhtml" 
	            xmlns:ui="http://java.sun.com/jsf/facelets"
	            xmlns:h="http://java.sun.com/jsf/html" 
	            xmlns:rich="http://richfaces.org/rich"
	            xmlns:a4j="http://richfaces.org/a4j"
	            xmlns:c="http://java.sun.com/jstl/core"
	            xmlns:f="http://java.sun.com/jsf/core"
	            xmlns:t="http://myfaces.apache.org/tomahawk"
	            xmlns:pretty="http://ocpsoft.com/prettyfaces">
         
       <ui:define name="scripts">
          <a4j:loadScript src="/js/FusionCharts.js"/>  
          <a4j:loadScript src="#{googleMapURLBean.mapUrl}&amp;hl=#{localeBean.locale.language}" />
          <script> 
				jQuery(function(){
					initLiveFleetMap();
				});
				function bodyUnload()
				{
					GUnload();
				}
          </script>  
       </ui:define>  
        <ui:param name="title" value="#{messages.overview} - #{navigationBean.group.name}"/>
      	<ui:param name="homeSelected" value="current" />

    	<ui:define name="content">
    			
           <ui:include src="/includes/overviewHeader.xhtml">
             	<ui:param name="showContextMenu" value="true"/>
     	 		<ui:param name="context" value="executive" />
     	 		<ui:param name="groupID" value="#{navigationBean.groupID}"/>
           </ui:include>
    		<table width="940" border="0" cellspacing="0" cellpadding="0" align="center" class="dash_table">
    			<tr>	
  
        			<td width="465" valign="top">
    					<!-- START OVERALL/R PANEL -->
    					<!-- leave reRenderList alone -->
    					<ui:include src="/includes/overallScore.xhtml">
                           	<ui:param name="zorder" value="6" />
     	 					<ui:param name="context" value="executive" />
                        </ui:include>
    					<!-- END PANEL -->
    					<div class="spacer"></div>
    				
     					<!-- START TREND PANEL -->
    					<ui:include src="/includes/trend.xhtml">
                            <ui:param name="xyheight" value="300"/>
                            <ui:param name="xywidth" value="445"/>  
                            <ui:param name="zorder" value="6"/>	
                            <ui:param name="scroll" value="true"/>	
     	 					<ui:param name="context" value="executive" />
    					</ui:include>
    					
    					<!-- END PANEL -->
     					<div class="spacer"></div>
    					<!-- START MPG PANEL -->
    					<ui:include src="/includes/mpgChart.xhtml">	
                			<ui:param name="barDef" value="#{mpgBean.barDef}"/>  
                            <ui:param name="xyheight" value="350"/>
                            <ui:param name="xywidth" value="440"/>  
                            <ui:param name="zorder" value="6"/>	
      	 					<ui:param name="context" value="executive" />
    					</ui:include>
    					<!-- END MPG -->	
    
    				</td>
    	
        			<td width="10"><img src="#{facesContext.externalContext.request.contextPath}/images/x.gif" width="10" /></td>
    				<td width="465" valign="top">
    				
						<!-- START CRASH SUMMARY PANEL -->
    					<ui:include src="/includes/crashSummary.xhtml">	
                            <ui:param name="xyheight" value="100"/>
                            <ui:param name="xywidth" value="440"/>  
                            <ui:param name="zorder" value="0"/>	
			            	<ui:param name="crashSummary" value="#{crashSummaryBean.crashSummary}"/>
    					</ui:include>
    					<!-- END CRASH SUMMARY -->
    					<div class="spacer"></div>
    					<ui:include src="/includes/speedPercentagePanel.xhtml">	
                            <ui:param name="xyheight" value="350"/>
                            <ui:param name="xywidth" value="440"/>  
                            <ui:param name="zorder" value="6"/>	
     	 					<ui:param name="context" value="executive" />
    					</ui:include>
    					<div class="spacer"></div>
    					<ui:include src="/includes/idlingPercentagePanel.xhtml">	
                            <ui:param name="xyheight" value="350"/>
                            <ui:param name="xywidth" value="440"/>  
                            <ui:param name="zorder" value="6"/>	
      	 					<ui:param name="context" value="executive" />
    					</ui:include>
						<div class="spacer"></div>
						<!-- START FLEET MAP PANEL -->
						<!-- leave reRenderList alone -->	
		               <pretty:urlbuffer var="mapDetailedDashboardLink" mappingId="detailedDashboard">
		                    <f:param value="#{navigationBean.groupID}"/>
		                    <f:param value="MAP"/>
		                </pretty:urlbuffer> 
						<ui:include src="/includes/liveFleetMap.xhtml">
							<ui:param name="mapheight" value="height:360px"/>
							<ui:param name="mapwidth" value="width:445px"/>
							<ui:param name="mapxcenter" value="#{navigationBean.group.mapLat}"/>
							<ui:param name="mapycenter" value="#{navigationBean.group.mapLng}"/>
							<ui:param name="mapzoom" value="#{navigationBean.group.mapZoom}"/>
		                    <ui:param name="detailLink" value="#{requestScope.mapDetailedDashboardLink}"/>
     	 					<ui:param name="context" value="executive" />
     	 					<ui:param name="title" value="#{messages.liveFleetTitle}"/>
     	 					<ui:param name="legend" value="#{messages.liveFleetLegend}"/>     	 					
						</ui:include>
						<!-- END PANEL -->
    				</td>
      			</tr>
    		</table>
        </ui:define>
</ui:composition>


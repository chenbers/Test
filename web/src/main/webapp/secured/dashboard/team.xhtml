<ui:composition template="/layout/layout.xhtml" 
            xmlns="http://www.w3.org/1999/xhtml" 
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html" 
            xmlns:rich="http://richfaces.org/rich"
            xmlns:a4j="http://richfaces.org/a4j"
            xmlns:iwi="http://pro.tiwi.com/jsf"
            xmlns:c="http://java.sun.com/jstl/core"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:t="http://myfaces.apache.org/tomahawk">
         
       <ui:param name="title" value="#{messages.group_team} - #{navigationBean.group.name}"/> 
       <ui:define name="scripts">
          <script src="#{facesContext.externalContext.request.contextPath}/js/FusionCharts.js" type="text/javascript"></script>   
          <a4j:loadScript src="#{googleMapURLBean.mapUrl}&amp;hl=#{localeBean.locale.language}" />
          <script> 
				jQuery(function(){
					initLiveFleetMap();
				});
				function bodyUnload()
				{
					GUnload();
				}
		</script>
       </ui:define>  		
	<ui:param name="homeSelected" value="current" />
        <ui:define name="content">
            <!--<t:saveState value="#{dashBoardBean}"/>-->
            <!--<t:saveState value="#{dashBoardDetailBean}"/>-->
            <!--<t:saveState value="#{dashBoardReportBean}"/>-->       
            <ui:include src="/includes/overviewHeader.xhtml">
             		<ui:param name="showContextMenu" value="true"/>
             		<ui:param name="groupID" value="#{navigationBean.groupID}"/>
     	 			<ui:param name="context" value="team" />
            </ui:include>
	
	<h:form id="setupTeam">
		<h:inputHidden value="#{teamOverviewBean.ping}" />
	</h:form>

	<table width="940" border="0" cellspacing="0" cellpadding="0" align="center" class="dash_table">
		<tr>
			<td colspan="3" valign="top">
			    					<!-- START CRASH SUMMARY PANEL -->
				<ui:include src="/includes/crashSummary.xhtml">	
                    <ui:param name="xyheight" value="100"/>
                    <ui:param name="xywidth" value="920"/>  
                    <ui:param name="zorder" value="0"/>	
	            	<ui:param name="crashSummary" value="#{crashSummaryBean.crashSummary}"/>
				</ui:include>
			<!-- END CRASH SUMMARY -->
			<div class="spacer"></div>
			</td>
		</tr>
	  <tr>
    	<td colspan="3" valign="top">
    		<ui:include src="/includes/teamOverview.xhtml">	
     	 			<ui:param name="context" value="team" />
    		</ui:include>
    	</td>
	  </tr>
	  <tr>
	    <td colspan="3" valign="top"><div class="spacer"></div></td>
	    </tr>
	  <tr>
    	<td width="465" valign="top">

		<!-- START PANEL -->
			<div class="">
				
			<!-- START FLEET MAP PANEL -->
			<!-- leave reRenderList alone -->	
				<ui:include src="/includes/liveFleetMap.xhtml">
					<ui:param name="mapheight" value="height:580px"/>
					<ui:param name="mapwidth" value="width:450px"/>
					<ui:param name="mapxcenter" value="#{navigationBean.group.mapLat}"/>
					<ui:param name="mapycenter" value="#{navigationBean.group.mapLng}"/>
					<ui:param name="mapzoom" value="#{navigationBean.group.mapZoom}"/>
					<ui:param name="flyOutImage" value="" />  
     	 			<ui:param name="context" value="team" />
     	 			<ui:param name="title" value="#{messages.liveTeamTitle}"/>
     	 			<ui:param name="legend" value="#{messages.liveTeamLegend}"/>     	 			
				</ui:include>
			<!-- END PANEL -->
             
			</div>
		<!-- END PANEL -->
		
		<div class="spacer"></div>
		
		<ui:include src="/includes/teamRecentSafety.xhtml">
		    <ui:param name="context" value="team" />
		    </ui:include>
			
		
		<div class="spacer"></div>

		<ui:include src="/includes/teamRecentDiagnostics.xhtml">
		    <ui:param name="context" value="team" />
		    </ui:include>
				
	
	</td>
	
    <td width="10"><h:graphicImage value="/images/x.gif" width="10" /></td>
	
    <td width="465" valign="top">
		<!-- START PANEL -->
		<rich:panel id="teamTopTables" >
   			<ui:include src="/includes/teamTop.xhtml">	
             <ui:param name="topScores" value="#{teamTopBean.topDrivers}"/>
             <ui:param name="bottomScores" value="#{teamTopBean.bottomDrivers}"/>
             <ui:param name="table" value="#{trendTable.table}"/>
		     <ui:param name="context" value="team" />
    		</ui:include>
        </rich:panel>
        
        <div class="spacer"></div>

        <!-- START MPG PANEL -->
        <ui:include src="/includes/mpgChart.xhtml"> 
          <ui:param name="title" value="#{messages.mpg_title}"/>
          <ui:param name="barDef" value="#{mpgBean.barDef}"/>  
          <ui:param name="xyheight" value="350"/>
          <ui:param name="xywidth" value="440"/>
          <ui:param name="includeDetailsLink" value="false"/>
          <ui:param name="includeExportLink" value="false"/>
		   <ui:param name="context" value="team" />
        </ui:include>
        <!-- END MPG -->  
        
        <div class="spacer"></div>

		<ui:include src="/includes/teamRecentEmergency.xhtml">
		    <ui:param name="context" value="team" />
		    </ui:include>		
        
    	</td>
	  </tr>
	  </table>
</ui:define>
</ui:composition>

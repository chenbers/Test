<html xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:rich="http://richfaces.org/rich">

<head>
<title>tiwiPRO Fulfillment</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="viewport" content="width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>
<link href="#{facesContext.externalContext.requestContextPath}/iphone/iui/iui.css" rel="stylesheet" type="text/css"/>
<link href="#{facesContext.externalContext.requestContextPath}/iphone/iui/table.css" rel="stylesheet" type="text/css"/>
<script type="application/x-javascript" src="#{facesContext.externalContext.requestContextPath}/iphone/iui/iui.js"></script>
</head>

<body >

<div class="toolbar">
<h1 id="pageTitle"></h1>
<a class="button leftButton" href="home.faces" target="_self">Home</a>
</div>

<h:form id="queryDevice" class="panel" title="Query Device" target="_self" selected="true">
				<h:outputText style="color: red; font-weight:bold;" value="#{daoUtilBean.errorMsg}" escape="false" />
<fieldset>
<div class="row">
					<label>Tiwi</label>
					<h:inputText id="serialNum" value="#{daoUtilBean.serialNum}" size="30"
						required="false" /> 
</div>
</fieldset>
					<h:commandButton value="Query"
						action="#{daoUtilBean.queryDeviceAction}" /> 
		<br />
		<br />
					<a class="whiteButton" href="home.faces">Cancel</a>
					<br />
						
				<br/>
						
				<h:outputText value="ACCT: #{daoUtilBean.account.acctName}" rendered="#{not empty daoUtilBean.account}"/>
				<br/>
				<h:outputText value="SN: #{daoUtilBean.device.serialNum}" rendered="#{not empty daoUtilBean.device}"/>
				<br/>
				<h:outputText value="Vehicle: #{daoUtilBean.vehicle.name} #{daoUtilBean.vehicle.VIN} #{daoUtilBean.vehicle.fullName}" rendered="#{not empty daoUtilBean.vehicle}"/>
				<br/>
				<h:outputText value="Driver: #{daoUtilBean.driver.person.fullNameWithId}" rendered="#{not empty daoUtilBean.driver}"/>
				<br/>
				<h:outputText value="Barcode: #{daoUtilBean.driver.barcode}" rendered="#{not empty daoUtilBean.driver}"/>
				<br/>
				<h:outputText value="Phone: #{daoUtilBean.device.phone}" rendered="#{not empty daoUtilBean.device}"/>
				<br/>
				<h:outputText value="IMEI: #{daoUtilBean.device.imei}" rendered="#{not empty daoUtilBean.device}"/>
				<br/>
				<h:outputText value="SIM: #{daoUtilBean.device.sim}" rendered="#{not empty daoUtilBean.device}"/>
				<br/>
				<h:outputText value="FW Version: #{daoUtilBean.device.firmwareVersion}" rendered="#{not empty daoUtilBean.device}"/>
				<br/>
				<h:outputText value="Witness Ver: #{daoUtilBean.device.witnessVersion}" rendered="#{not empty daoUtilBean.device}"/>
				<br/>
				<h:outputText value="EMUHash: #{daoUtilBean.device.emuMd5}" rendered="#{not empty daoUtilBean.device}"/>
				<br/>
				<h:outputText value="EPhone: #{daoUtilBean.device.ephone}" rendered="#{not empty daoUtilBean.device}"/>
				<br/>
				<h:outputText value="#{daoUtilBean.lastLocationDisplay}" rendered="#{not empty daoUtilBean.vehicle}" escape="false"/>
				<br/>
				<br/>
				<h:outputLink target="_blank" 
				  rendered="#{not empty daoUtilBean.device}"
				  value="tel:#{daoUtilBean.device.phone}">Call Tiwi #{daoUtilBean.device.phone}</h:outputLink>
				<br/>
				<h:outputLink target="_blank" 
				  rendered="#{not empty daoUtilBean.device}"
				  value="https://t3.tiwi.com:8084/openreports/executeReport.action?userName=salesuser&amp;password=45Uu9i92A_8&amp;submitRun=Run&amp;reportId=131&amp;msisdn=#{daoUtilBean.device.phone}"
				 >Radius Call Records</h:outputLink>
				<br/>
				
				<rich:dataList rendered="#{daoUtilBean.device != null}" value="#{daoUtilBean.forwardCommands}" id="fwdcmds" var="fwdcmd" title="Forward Commands">
					<h:outputText value="#{fwdcmd}" escape="false"/><br/>
				</rich:dataList>

				<rich:dataList rendered="#{daoUtilBean.vehicle != null}" value="#{daoUtilBean.vehicleNotes}" id="vehiclenotes" var="note" title="Vehicle Notes">
					<h:outputText value="#{note}" escape="false"/><br/>
				</rich:dataList>

				<h:outputText value="#{daoUtilBean.successMsg}"
						escape="false" />
				<br/>

				<h:outputText value="#{daoUtilBean.vehicle}" rendered="#{not empty daoUtilBean.vehicle}"/>
				<br/>
				<h:outputText value="#{daoUtilBean.driver}" rendered="#{not empty daoUtilBean.driver}"/>
				<br/>
				<br/>
				<h:outputText value="#{daoUtilBean.driver.person}" rendered="#{not empty daoUtilBean.driver.person}"/>
				<br/>
				<br/>


										
				</h:form>
<script>document.getElementById('queryDevice').setAttribute("selected","true");</script>
    </body>
</html>

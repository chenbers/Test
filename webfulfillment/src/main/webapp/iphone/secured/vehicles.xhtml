<html xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<head>
<title>tiwiPRO Fulfillment</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="viewport" content="width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>
<link href="#{facesContext.externalContext.requestContextPath}/iphone/iui/iui.css" rel="stylesheet" type="text/css"/>
<link href="#{facesContext.externalContext.requestContextPath}/iphone/iui/table.css" rel="stylesheet" type="text/css"/>
<script type="application/x-javascript" src="#{facesContext.externalContext.requestContextPath}/iphone/iui/iui.js"></script>
</head>

    <body>
<script language="JavaScript">

function setNextPane(pgID)
{
  setTimeout("iui.showPageById('"+pgID+"');",750)
}

function setUpMessageBox()
{
document.getElementById('editVehicle:idJscriptOnLoad').value="setNextPane('idMessages')";
}

function chooseVehicle(val)
{
document.getElementById('vehicleForm:idVehicle').value=val;
document.getElementById('vehicleForm:idJscriptOnLoad').value="setNextPane('editVehicle')";
document.getElementById('vehicleForm').submit();
}

#{daoUtilBean.jscriptOnLoad}

</script>
<div class="toolbar">
<h1 id="pageTitle"></h1>
<a class="button leftButton" href="home.faces" target="_self">Home</a>
<a class="button" href="#searchVehicle">Search</a>
</div>

<ul id="chooseVehicle" title="Choose Vehicle" selected="true">
<li class="group">#{daoUtilBean.selectedGroupName}</li>
<a4j:repeat value="#{daoUtilBean.vehicleSelectList}" var="item">
 <li>
 <a href="#" onclick="chooseVehicle(#{item.value})">#{item.label}</a>
 </li>
</a4j:repeat>
</ul>


<h:form id="vehicleForm" target="_self" method="POST">
<h:inputHidden id="idVehicle" value="#{daoUtilBean.selectedVehicleID}" />
<h:inputHidden id="idJscriptOnLoad" value="#{daoUtilBean.jscriptOnLoad}" />

</h:form>

<h:form id="idMessages" class="panel" title="Result">
<fieldset>
		<div class="row">
		<div style="color: red; font-weight:bold;">#{daoUtilBean.errorMsg}</div>
		#{daoUtilBean.successMsg}
		</div>

		<div class="row">
		<a class="whiteButton" href="#chooseVehicle">Cancel</a>
		</div>
</fieldset>

</h:form>

<h:form id="searchVehicle" class="panel" title="Find Vehicle" target="_self">
	<fieldset>
		<div class="row">Search by VIN, Vehicle Name, or License</div>
		<div class="row">
			<label>Vehicle</label>
			<h:inputText id="vehicleName" value="#{daoUtilBean.vehicleCriteria}" size="30"/>
		</div>
	</fieldset>
	<h:commandButton onclick="setUpMessageBox();" class="whiteButton" value="Search" action="#{daoUtilBean.searchVehicleAction}" />
	<br/>
	<a class="whiteButton" href="#chooseVehicle">Cancel</a>
</h:form>


<h:form id="editVehicle" class="panel" title="Edit Vehicle" action="#idMessages" target="_self" method="POST">
<h:inputHidden id="idJscriptOnLoad" value="#{daoUtilBean.jscriptOnLoad}" />
 <fieldset>
<div class="row">
		#{daoUtilBean.selectedAccountName}<br/>
  	    #{daoUtilBean.selectedGroupName}<br/>
  	    #{daoUtilBean.selectedVehicleID}
</div>		          
<div class="row">
	<label>License</label>
		<h:inputText id="license" value="#{daoUtilBean.license}" size="30"
			required="false"/> 
</div>		          
<div class="row">
	<label>VIN</label>
		<h:inputText id="VIN" value="#{daoUtilBean.VIN}" size="30"
			required="false"/> 
</div>		          
<div class="row">
	<label>Name</label>
		<h:inputText id="vehicleName" value="#{daoUtilBean.vehicleName}" size="30"
			required="false"/> 
</div>		          
<div class="row">
	<label>Make</label>
		<h:inputText id="make" value="#{daoUtilBean.make}" size="30"
			required="false"/> 
</div>		          
<div class="row">
	<label>Model</label>
		<h:inputText id="model" value="#{daoUtilBean.model}" size="30"
			required="false"/> 
</div>		          
<div class="row">
	<label>Year</label>
		<h:inputText id="year" value="#{daoUtilBean.year}" size="10"
			required="false"/> 
</div>		          
		<div class="row">
			<label>Tiwi</label> 
			<h:inputText id="serialNum"
				value="#{daoUtilBean.serialNum}" size="30" required="false"
				requiredMessage="required" />
		</div>
</fieldset>
		<h:commandButton onclick="setUpMessageBox();" class="whiteButton" value="Submit" action="#{daoUtilBean.editVehicleAction}" />
		<br/>
		<a class="whiteButton" href="#chooseVehicle">Cancel</a>
</h:form>


    </body>
</html>